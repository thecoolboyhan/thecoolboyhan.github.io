---
title:  读《凤凰架构》有感
description: 最近攻读周志明老师的《凤凰架构》，书中介绍了软件领域的架构演进，涉及到众多架构知识，分布式场景的设计原则等，不知能否做到归纳总结。
image: 1.png
date: 2025-08-07
slug: icyfenix
categories: 
  - 精选
  - 分布式
  - 架构
tags:
  - 分布式
  - 读后感
  - 架构
---



# 凤凰架构

> 文中大部分资料摘抄自周志明老师的[凤凰架构](https://icyfenix.cn/)开源网站



## 服务架构演进史

> 本部分介绍了架构的演进，并详细讲解了凤凰架构的概念，由于内容众多，且难以总结。后续详细补充。





## 架构

### 访问远程服务



#### 远程服务调用（RPC）



> RPC出现的目的是为了让计算机能够跟调用本地方法一样去调用远程方法。







##### **进程间通讯（IPC）**



1. 管道（pipe）

   管道类似于两个进程间的桥梁，可以通过管道在进程间传递少量的字符流或字节流。

   管道命令：

   ``` sh
   ps -ef | grep java
   ```

2. 信号（Signal）

   用于通知目标某种事件发生，除了用于进程间通信外，进程还可以发送信号给进程自身。

   信号命令：

   ``` sh
   kill -9 pid
   ```

3. 信号量（Semaphore)

   两个进程之间同步协作的手段，相同于操作系统提供的一个特殊变量，程序可以在上面进行wait（）和notify（）操作。

4. 消息队列（Message Queue）：上面的三个方式只适合传递少量信息，消息队列用于进程间数据量较多的通信。

5. 共享内存（Shared Memory）：允许多个进程访问同一块公共的内存空间，这是效率最高的进程间通信方式。

6. 套接字接口（Socket）：可用于不同机器之间的进程通信。



![img](https://icyfenix.cn/assets/img/rpc.38c28315.png)





#####  RPC的三个基本问题



- 如何表示数据（序列化与反序列化）

将交互双方锁涉及的数据转换为某种事先约定好的中立数据流格式来进行传输，将输数据流转换回不同语言中对应的数据类型来进行使用。





- 如何传递数据

两个服务的Endpoint之间交互操作、交换数据。一般是基于标准的TCP、UDP等标准的传输层协议来完成的。（也有可能直接使用HTTP协议来实现）



- 如何确定方法

编译器或者解释器回根据语言规范，将调用的方法签名传唤为进程空间中子过程入口位置的指针。





#### REST设计风格（表征状态转移）



> 并非协议，只是一种风格
>
> RPC：面向过程编程
> REST：面向资源编程







- 资源（Resource）：内容本身，如信息、数据等。远程调用等都是为了提供资源。
- 表征（Representation）：信息与用户交互时的表示形式，这与软件分层架构中常说的表示层的语义一致。
- 状态（State）：分成有状态与无状态，由服务端保存用户目前所处的阶段或状态为有状态，由用户自己保存自己目前所处的状态，服务端只负责提供资源的为无状态。
- 转移（Transfer）：服务端通过某种方式让用户的状态发生改变，如获取了新资源等。这个操作被称为：表征状态转移





##### REST风格的六大原则



1. 服务端与客户端分离（Client-Server）前后端分离

   将用户界面所关注的逻辑和数据存储所关注的逻辑分离开来，有助于提高用户界面的跨平台的可移植性。

2. 无状态（Stateless）去除session

   REST希望服务器不要去负责维护状态，每一次从客户端发送的请求中，应包括所有必要的上下文信息，会话信息也由客户端负责保存维护，服务端依据客户端传递的状态来执行业务处理逻辑，驱动整个应用的状态变迁。

   > 目前大部分系统达不到这个要求，服务端无状态可以在分布式计算中获得非常高的价值，但即希望于用户每次传输大量的上下文有点不切实际。

3. 可缓存（Cacheability）分布式缓存

   无状态服务器虽然提升了系统的可见性、可靠性和可伸缩性，但降低了系统的网络性。REST希望分布式系统有一个可以暂时缓存数据的分布式缓存（Redis），这样服务器直接交互，可以进一步提高性能。

4. 分层系统（Layered System）（负载均衡）

   客户端不需要直到是否直接连接到了最终的服务器，中间服务器可以通过负载均衡和共享缓存的机制提高系统的可扩展性，这样便于缓存、伸缩和安全策略的部署。

5. 统一接口（Uniform Interface）（面向资源）

   REST希望开发者面向资源编程，希望软件系统设计的重点放在抽象系统该有哪些资源上，而不是抽象系统该有哪些行为（服务）上。

   用一个登录场景来举例子：

   传统思维：登录login()服务，注销logout（）服务。

   REST思维：登录，PUT Session，注销DELETE Session。查询登录信息，GET Session

   > 所有的资源最好应该是自描述信息的，或都是通过资源id来进行的。

6. 按需代码（Code-On-Demand）（可选项）

   客户端无需直到服务端如何运行，服务端会按需把需要的可执行程序发送给客户端执行。









##### RMM成熟度

> 如何衡量一个服务有多么REST
