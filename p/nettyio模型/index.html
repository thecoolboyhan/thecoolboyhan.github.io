<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="æ·±å…¥ä»‹ç»NettyIOæ¨¡å‹"><title>NettyIOæ¨¡å‹</title><link rel=canonical href=https://thecoolboyhan.github.io/p/nettyio%E6%A8%A1%E5%9E%8B/><link rel=stylesheet href=/scss/style.min.833d6eed45de56f48306bf57268d5b8cdfc8a60e8e7bdc99810464fcd033f7c6.css><meta property='og:title' content="NettyIOæ¨¡å‹"><meta property='og:description' content="æ·±å…¥ä»‹ç»NettyIOæ¨¡å‹"><meta property='og:url' content='https://thecoolboyhan.github.io/p/nettyio%E6%A8%A1%E5%9E%8B/'><meta property='og:site_name' content='éŸ©æ°¸å‘çš„åšå®¢'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='netty'><meta property='article:tag' content='java'><meta property='article:tag' content='ioæ¨¡å‹'><meta property='article:published_time' content='2025-07-02T00:00:00+00:00'><meta property='article:modified_time' content='2025-07-02T00:00:00+00:00'><meta property='og:image' content='https://thecoolboyhan.github.io/p/nettyio%E6%A8%A1%E5%9E%8B/20205-05-29.png'><meta name=twitter:title content="NettyIOæ¨¡å‹"><meta name=twitter:description content="æ·±å…¥ä»‹ç»NettyIOæ¨¡å‹"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://thecoolboyhan.github.io/p/nettyio%E6%A8%A1%E5%9E%8B/20205-05-29.png'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_63165f4306fe5eb3.png width=300 height=400 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>éŸ©æ°¸å‘çš„åšå®¢</a></h1><h2 class=site-description>ç›®å‰äººåœ¨ä¸Šæµ·ï¼Œ20å¹´æ¯•ä¸šï¼Œæ™®é€šmuggleï¼Œjavaå¼€å‘ã€‚é‚®ç®±ï¼šhanyongfa2013@163.com ã€‚</h2></div></header><ol class=menu-social><li><a href=https://github.com/thecoolboyhan target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://leetcode.cn/u/thecoolboy/ target=_blank title=åŠ›æ‰£ rel=me><svg role="img" viewBox="0 0 24 24"><title>LeetCode</title><path d="M13.483.0a1.374 1.374.0 00-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266.0 00-1.209 2.104 5.35 5.35.0 00-.125.513 5.527 5.527.0 00.062 2.362 5.83 5.83.0 00.349 1.017 5.938 5.938.0 001.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378.0 00-1.951-.003l-2.396 2.392a3.021 3.021.0 01-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68.0 01.066-.523 2.545 2.545.0 01.619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.94-.207a1.384 1.384.0 00-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384.0 0013.483.0zm-2.866 12.815a1.38 1.38.0 00-1.38 1.382 1.38 1.38.0 001.38 1.382H20.79a1.38 1.38.0 001.38-1.382 1.38 1.38.0 00-1.38-1.382z"/></svg></a></li><li><a href=mailto:hanyongfa2013@163.com target=_blank title=é‚®ç®± rel=me><svg id="mdi-email-arrow-right-outline" viewBox="0 0 24 24"><path d="M13 19C13 18.66 13.04 18.33 13.09 18H4V8l8 5 8-5v5.09C20.72 13.21 21.39 13.46 22 13.81V6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18c0 1.1.9 2 2 2h9.09C13.04 19.67 13 19.34 13 19M20 6l-8 5L4 6H20m0 16V20H16V18h4V16l3 3-3 3z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#bio>BIO</a><ol><li><a href=#é—®é¢˜>é—®é¢˜</a></li><li><a href=#ä½¿ç”¨æ± åŒ–æŠ€æœ¯æ¥ä¼˜åŒ–>ä½¿ç”¨æ± åŒ–æŠ€æœ¯æ¥ä¼˜åŒ–</a></li><li><a href=#ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹>ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹</a></li></ol></li><li><a href=#nio>NIO</a><ol><li><a href=#é—®é¢˜-1>é—®é¢˜</a></li></ol></li><li><a href=#ioå¤šè·¯å¤ç”¨>IOå¤šè·¯å¤ç”¨</a><ol><li><a href=#selector>Selector</a></li><li><a href=#linuxepoll>linuxï¼šepoll</a></li><li><a href=#macoså’Œbsdkqueue>macOSå’ŒBSDï¼škqueue</a></li><li><a href=#windowsiocp>Windowsï¼šIOCP</a></li><li><a href=#å…¶ä»–ç³»ç»Ÿselectæˆ–poll>å…¶ä»–ç³»ç»Ÿï¼šselectæˆ–poll</a></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li><li><a href=#ä¾ç„¶æœ‰ç¼ºç‚¹>ä¾ç„¶æœ‰ç¼ºç‚¹</a></li></ol></li><li><a href=#ååº”å™¨æ¨¡å¼reactor>ååº”å™¨æ¨¡å¼ï¼ˆReactorï¼‰</a><ol><li><a href=#å·¥ä½œåŸç†>å·¥ä½œåŸç†</a></li><li><a href=#ä¼˜åŠ¿>ä¼˜åŠ¿</a></li><li><a href=#ç¼ºç‚¹>ç¼ºç‚¹</a></li></ol></li><li><a href=#netty-ioæ¨¡å‹å•æœºå¤„ç†ç™¾ä¸‡çº§å¹¶å‘>Netty IOæ¨¡å‹ï¼ˆå•æœºå¤„ç†ç™¾ä¸‡çº§å¹¶å‘ï¼‰</a><ol><li><a href=#ä¸»è¦ç»„ä»¶>ä¸»è¦ç»„ä»¶</a></li><li><a href=#å·¥ä½œåŸç†-1>å·¥ä½œåŸç†</a></li><li><a href=#ä¼˜ç‚¹>ä¼˜ç‚¹</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/nettyio%E6%A8%A1%E5%9E%8B/><img src=/p/nettyio%E6%A8%A1%E5%9E%8B/20205-05-29_hu_d65299d387b9c90a.png srcset="/p/nettyio%E6%A8%A1%E5%9E%8B/20205-05-29_hu_d65299d387b9c90a.png 800w, /p/nettyio%E6%A8%A1%E5%9E%8B/20205-05-29_hu_9fb38b88dc85bace.png 1600w" width=800 height=533 loading=lazy alt="Featured image of post NettyIOæ¨¡å‹"></a></div><div class=article-details><header class=article-category><a href=/categories/%E7%B2%BE%E9%80%89/>ç²¾é€‰</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/nettyio%E6%A8%A1%E5%9E%8B/>NettyIOæ¨¡å‹</a></h2><h3 class=article-subtitle>æ·±å…¥ä»‹ç»NettyIOæ¨¡å‹</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2025-07-02T00:00:00Z>Jul 02, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 12 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h1 id=nettyioæ¨¡å‹>nettyIOæ¨¡å‹</h1><h2 id=bio>BIO</h2><p>å…ˆä¸Šä»£ç ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯é˜»å¡çš„</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SocketServer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ServerSocket</span><span class=w> </span><span class=n>serverSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ServerSocket</span><span class=p>(</span><span class=n>9000</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>while</span><span class=p>(</span><span class=kc>true</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;ç­‰å¾…è¿æ¥&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//            é˜»å¡çš„</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Socket</span><span class=w> </span><span class=n>clientSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>serverSocket</span><span class=p>.</span><span class=na>accept</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æœ‰å®¢æˆ·ç«¯è¿æ¥äº†ã€‚ã€‚&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         		</span><span class=n>handler</span><span class=p>(</span><span class=n>clientSocket</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>handler</span><span class=p>(</span><span class=n>Socket</span><span class=w> </span><span class=n>clientSocket</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>bytes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>byte</span><span class=o>[</span><span class=n>1024</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;å‡†å¤‡readã€‚ã€‚ã€‚&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//        æ¥æ”¶å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œé˜»å¡æ–¹æ³•ï¼Œæ²¡æœ‰æ•°æ®å¯è¯»æ—¶å°±é˜»å¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>read</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clientSocket</span><span class=p>.</span><span class=na>getInputStream</span><span class=p>().</span><span class=na>read</span><span class=p>(</span><span class=n>bytes</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;readå®Œæ¯•&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>read</span><span class=o>!=-</span><span class=n>1</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ï¼š&#34;</span><span class=o>+</span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=p>(</span><span class=n>bytes</span><span class=p>,</span><span class=n>0</span><span class=p>,</span><span class=n>read</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;end&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>ç›®å‰çš„ç¼ºé™·</li></ul><p>ä¸»ç¨‹åºé‡‡ç”¨å•çº¿ç¨‹é˜»å¡å¤„ç†ã€‚åŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€ä¸ªè¿æ¥ï¼Œå¦‚æœæ­¤è¿æ¥æ²¡æœ‰å¤„ç†ç»“æŸï¼Œå…¶ä»–çš„å®¢æˆ·ç«¯ä¹Ÿæ— æ³•è¿æ¥ã€‚</p><ul><li>å¦‚ä½•ä¼˜åŒ–ï¼Ÿ</li></ul><p>åœ¨BIOçš„åŸºç¡€ä¸Šï¼Œå¢åŠ å¤šçº¿ç¨‹æ“ä½œï¼Œæ¯æ¬¡æ¥ä¸€ä¸ªçº¿ç¨‹å°±å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯é˜»å¡çš„</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SocketServer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ServerSocket</span><span class=w> </span><span class=n>serverSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ServerSocket</span><span class=p>(</span><span class=n>9000</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>while</span><span class=p>(</span><span class=kc>true</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;ç­‰å¾…è¿æ¥&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//            é˜»å¡çš„</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Socket</span><span class=w> </span><span class=n>clientSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>serverSocket</span><span class=p>.</span><span class=na>accept</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æœ‰å®¢æˆ·ç«¯è¿æ¥äº†ã€‚ã€‚&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//            åœ¨å•çº¿ç¨‹ä¸Šåšä¼˜åŒ–ï¼Œæ¯æ¥æ”¶çš„ä¸€ä¸ªè¿æ¥ï¼Œå°±å¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Thread</span><span class=p>.</span><span class=na>ofPlatform</span><span class=p>().</span><span class=na>start</span><span class=p>(()</span><span class=o>-&gt;</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>handler</span><span class=p>(</span><span class=n>clientSocket</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>e</span><span class=p>.</span><span class=na>printStackTrace</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}).</span><span class=na>start</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>handler</span><span class=p>(</span><span class=n>Socket</span><span class=w> </span><span class=n>clientSocket</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>bytes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>byte</span><span class=o>[</span><span class=n>1024</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;å‡†å¤‡readã€‚ã€‚ã€‚&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//        æ¥æ”¶å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œé˜»å¡æ–¹æ³•ï¼Œæ²¡æœ‰æ•°æ®å¯è¯»æ—¶å°±é˜»å¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>read</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clientSocket</span><span class=p>.</span><span class=na>getInputStream</span><span class=p>().</span><span class=na>read</span><span class=p>(</span><span class=n>bytes</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;readå®Œæ¯•&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>read</span><span class=o>!=-</span><span class=n>1</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ï¼š&#34;</span><span class=o>+</span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=p>(</span><span class=n>bytes</span><span class=p>,</span><span class=n>0</span><span class=p>,</span><span class=n>read</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;end&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é—®é¢˜>é—®é¢˜</h3><p>è™½ç„¶å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚äº†ï¼Œä½†æ˜¯å½“â€œC10Kâ€æ—¶ã€‚ä¼šåŒæ—¶åˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä¼šå ç”¨å¤§é‡çš„å†…å­˜ã€‚</p><blockquote><p>C10Kï¼šåŒæ—¶æœ‰1ä¸‡è¯·æ±‚æ‰“åˆ°æœåŠ¡å™¨</p><p>C10Mï¼šåŒæ—¶æœ‰1åƒä¸‡è¯·æ±‚æ‰“åˆ°æœåŠ¡å™¨</p></blockquote><h3 id=ä½¿ç”¨æ± åŒ–æŠ€æœ¯æ¥ä¼˜åŒ–>ä½¿ç”¨æ± åŒ–æŠ€æœ¯æ¥ä¼˜åŒ–</h3><p>å¦‚æœä½¿ç”¨çº¿ç¨‹æ± æ¥å¤„ç†è¯·æ±‚ï¼Œè™½ç„¶å¯ä»¥åŒæ—¶å¤„ç†éƒ¨åˆ†è¯·æ±‚ï¼Œä½†æ˜¯å¦‚æœçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹éƒ½è¢«é˜»å¡ï¼Œå°±æ— æ³•å†å¤„ç†å…¶ä»–è¯·æ±‚äº†ã€‚ï¼ˆå…¨éƒ¨åœ¨é˜»å¡é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼‰</p><h3 id=ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹>ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹</h3><p>å…¶å®ä¸Šé¢æ‰€æœ‰çš„é—®é¢˜å°±å¯ä»¥åœ¨BIOçš„åŸºç¡€ä¸Šç›´æ¥ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹æŠ€æœ¯æ¥è§£å†³ï¼Œä½†ä»Šå¤©çš„é‡ç‚¹ä¸æ˜¯è¿™ä¸ªä¸‹é¢åªç»™å‡ºä¼˜åŒ–ä»£ç ã€‚</p><blockquote><p>ä½†è™šæ‹Ÿçº¿ç¨‹ä¸é€‚åˆåˆ™é•¿æ—¶é—´çš„å¤„ç†ï¼Œå°½é‡å¤„ç†å°ä»»åŠ¡ï¼Œå¦‚æœå­˜åœ¨å¤§é‡å¤æ‚çš„å¤„ç†ã€‚è™šæ‹Ÿçº¿ç¨‹ä»ç„¶æœ‰é—®é¢˜ã€‚</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Thread</span><span class=p>.</span><span class=na>ofVirtual</span><span class=p>().</span><span class=na>start</span><span class=p>(()</span><span class=o>-&gt;</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>handler</span><span class=p>(</span><span class=n>clientSocket</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>e</span><span class=p>.</span><span class=na>printStackTrace</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}).</span><span class=na>start</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>æ¥ä¸‹æ¥å°±éœ€è¦ä½¿ç”¨NIOäº†</p></blockquote><h2 id=nio>NIO</h2><p>å…ˆä¸Šä»£ç </p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>NioServer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>SocketChannel</span><span class=o>&gt;</span><span class=w> </span><span class=n>channelList</span><span class=o>=</span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//        Nioçš„æœåŠ¡channelï¼Œç±»ä¼¼äºBIOçš„ServerSocket</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>(</span><span class=n>ServerSocketChannel</span><span class=w> </span><span class=n>serverSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ServerSocketChannel</span><span class=p>.</span><span class=na>open</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//            å°†æ­¤ServerSocketç»‘å®šåˆ°9000ç«¯å£</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>serverSocket</span><span class=p>.</span><span class=na>socket</span><span class=p>().</span><span class=na>bind</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>InetSocketAddress</span><span class=p>(</span><span class=n>9000</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//            å°†channelè®¾ç½®æˆéé˜»å¡çš„</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>serverSocket</span><span class=p>.</span><span class=na>configureBlocking</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                NIOçš„éé˜»å¡æ“ä½œç”±æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œåº•å±‚è°ƒç”¨äº†linuxçš„acceptå‡½æ•°</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>SocketChannel</span><span class=w> </span><span class=n>socketChannel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>serverSocket</span><span class=p>.</span><span class=na>accept</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                æ£€æµ‹åˆ°è¿æ¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>socketChannel</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;è¿æ¥æˆåŠŸ&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                    è®¾ç½®soocketChannelä¹Ÿæ˜¯éé˜»å¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>socketChannel</span><span class=p>.</span><span class=na>configureBlocking</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                    æŠŠå½“å‰SocketChannelå…¥é˜Ÿï¼Œæ–¹ä¾¿åé¢è½®è¯¢å¤„ç†</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>channelList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>socketChannel</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>//            å¤„ç†è¿æ¥çš„è¯·æ±‚</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Iterator</span><span class=o>&lt;</span><span class=n>SocketChannel</span><span class=o>&gt;</span><span class=w> </span><span class=n>iterator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>channelList</span><span class=p>.</span><span class=na>iterator</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>iterator</span><span class=p>.</span><span class=na>hasNext</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>SocketChannel</span><span class=w> </span><span class=n>sc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iterator</span><span class=p>.</span><span class=na>next</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                    åˆ©ç”¨ç›´æ¥å†…å­˜æ¥å¤„ç†è¯·æ±‚</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>ByteBuffer</span><span class=w> </span><span class=n>byteBuffer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ByteBuffer</span><span class=p>.</span><span class=na>allocate</span><span class=p>(</span><span class=n>6</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=kt>int</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sc</span><span class=p>.</span><span class=na>read</span><span class=p>(</span><span class=n>byteBuffer</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>len</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æ¥æ”¶çš„æ¶ˆæ¯ï¼š&#34;</span><span class=o>+</span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=p>(</span><span class=n>byteBuffer</span><span class=p>.</span><span class=na>array</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>len</span><span class=o>==-</span><span class=n>1</span><span class=p>){</span><span class=c1>//å¦‚æœæ–­å¼€è¿æ¥ï¼Œå°±å‡ºé˜Ÿ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>iterator</span><span class=p>.</span><span class=na>remove</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;å®¢æˆ·ç«¯æ–­å¼€äº†è¿æ¥&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>è™½ç„¶æ˜¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†äº†æ‰€æœ‰çš„è¯·æ±‚ï¼Œä¸”è¯·æ±‚çš„å¤„ç†ç†è®ºæ²¡æœ‰æ•°é‡é™åˆ¶ã€‚</p><p>ä½†ä¾ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜</p><h3 id=é—®é¢˜-1>é—®é¢˜</h3><ol><li>whileï¼ˆtrueï¼‰ä¸€ç›´å ç”¨CPUï¼ŒCPUçš„ä¸€ä¸ªæ ¸å¿ƒè¢«å ç”¨äº†ã€‚</li><li>å­˜åœ¨è¿‡å¤šæ— ç”¨å¤„ç†ï¼šå¦‚æœæš‚å­˜é›†åˆä¸­æ•°é‡ç‰¹åˆ«å¤šï¼Œä¸”çœŸæ­£éœ€è¦å¤„ç†çš„è¯·æ±‚å¯èƒ½åªæœ‰ä¸€ä¸¤ä¸ªã€‚ä½†å¦‚æœæƒ³è¦å¤„ç†ä»ç„¶éœ€è¦éå†æ•´ä¸ªé›†åˆã€‚</li></ol><ul><li>ä¼˜åŒ–å‰ªæ</li></ul><h2 id=ioå¤šè·¯å¤ç”¨>IOå¤šè·¯å¤ç”¨</h2><p>ç›´æ¥ä¸Šä»£ç </p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>NioSelectorServer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>(</span><span class=n>ServerSocketChannel</span><span class=w> </span><span class=n>serverSocketChannel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ServerSocketChannel</span><span class=p>.</span><span class=na>open</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//            æ‰“å¼€ç³»ç»ŸSelectorå¤„ç†Channelï¼Œåˆ›å»ºepoll</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>             </span><span class=n>Selector</span><span class=w> </span><span class=n>selector</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Selector</span><span class=p>.</span><span class=na>open</span><span class=p>();)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>serverSocketChannel</span><span class=p>.</span><span class=na>socket</span><span class=p>().</span><span class=na>bind</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>InetSocketAddress</span><span class=p>(</span><span class=n>9000</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>serverSocketChannel</span><span class=p>.</span><span class=na>configureBlocking</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//            æŠŠChannelæ³¨å†Œåˆ°Selectorä¸Šï¼Œå¹¶è®©Selectoré€‰æ‹©è¿æ¥äº‹ä»¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>serverSocketChannel</span><span class=p>.</span><span class=na>register</span><span class=p>(</span><span class=n>selector</span><span class=p>,</span><span class=w> </span><span class=n>SelectionKey</span><span class=p>.</span><span class=na>OP_ACCEPT</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=kc>true</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                é˜»å¡ç­‰å¾…éœ€è¦å¤„ç†çš„äº‹ä»¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>selector</span><span class=p>.</span><span class=na>select</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                è¿”å›æœ‰äº‹ä»¶çš„key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Set</span><span class=o>&lt;</span><span class=n>SelectionKey</span><span class=o>&gt;</span><span class=w> </span><span class=n>selectionKeys</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>selector</span><span class=p>.</span><span class=na>selectedKeys</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Iterator</span><span class=o>&lt;</span><span class=n>SelectionKey</span><span class=o>&gt;</span><span class=w> </span><span class=n>iterator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>selectionKeys</span><span class=p>.</span><span class=na>iterator</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                éå†å¤„ç†æœ‰äº‹ä»¶çš„è¯·æ±‚</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>while</span><span class=p>(</span><span class=n>iterator</span><span class=p>.</span><span class=na>hasNext</span><span class=p>()){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>SelectionKey</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iterator</span><span class=p>.</span><span class=na>next</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                    å¦‚æœæ˜¯è¿æ¥äº‹ä»¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=p>(</span><span class=n>key</span><span class=p>.</span><span class=na>isAcceptable</span><span class=p>()){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>try</span><span class=w> </span><span class=p>(</span><span class=n>ServerSocketChannel</span><span class=w> </span><span class=n>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ServerSocketChannel</span><span class=p>)</span><span class=w> </span><span class=n>key</span><span class=p>.</span><span class=na>channel</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=n>SocketChannel</span><span class=w> </span><span class=n>socketChannel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>server</span><span class=p>.</span><span class=na>accept</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=n>socketChannel</span><span class=p>.</span><span class=na>configureBlocking</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                            ç»™å½“å‰è¿æ¥æ³¨å†Œè¯»å–æ—¶é—´</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=n>socketChannel</span><span class=p>.</span><span class=na>register</span><span class=p>(</span><span class=n>selector</span><span class=p>,</span><span class=w> </span><span class=n>SelectionKey</span><span class=p>.</span><span class=na>OP_READ</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;å®¢æˆ·ç«¯è¿æ¥æˆåŠŸäº†&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                        å¦‚æœæ˜¯è¯»äº‹ä»¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key</span><span class=p>.</span><span class=na>isReadable</span><span class=p>()){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>try</span><span class=w> </span><span class=p>(</span><span class=n>SocketChannel</span><span class=w> </span><span class=n>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>SocketChannel</span><span class=p>)</span><span class=w> </span><span class=n>key</span><span class=p>.</span><span class=na>channel</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=n>ByteBuffer</span><span class=w> </span><span class=n>byteBuffer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ByteBuffer</span><span class=p>.</span><span class=na>allocate</span><span class=p>(</span><span class=n>6</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=kt>int</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>server</span><span class=p>.</span><span class=na>read</span><span class=p>(</span><span class=n>byteBuffer</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=k>if</span><span class=p>(</span><span class=n>len</span><span class=w> </span><span class=o>&gt;</span><span class=n>0</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;æ¥æ”¶çš„è¯·æ±‚:&#34;</span><span class=o>+</span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=p>(</span><span class=n>byteBuffer</span><span class=p>.</span><span class=na>array</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=p>}</span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>len</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;å®¢æˆ·ç«¯è¿æ¥æ–­å¼€&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>server</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//                        å½“å‰äº‹ä»¶å·²ç»è¢«å¤„ç†ï¼Œåˆ é™¤å½“å‰æ•°æ®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>iterator</span><span class=p>.</span><span class=na>remove</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>é€šè¿‡ä¸Šé¢çš„æ–¹å¼ï¼Œå¯ä»¥å®Œç¾è§£å†³æ™®é€šNIOä¸­çš„é—®é¢˜</p><p>å¦‚æœselectoræ£€æµ‹ä¸åˆ°äº‹ä»¶ï¼Œå°±å¤„äºé˜»å¡çŠ¶æ€ã€‚ä¸ä¼šå ç”¨CPU</p><p>ä¸ä¼šå­˜åœ¨å¤šä½™å¤„ç†ï¼Œåªæœ‰æœ‰äº‹ä»¶çš„è¯·æ±‚æ‰ä¼šè¢«ç¨‹åºå¤„ç†ã€‚æ²¡æœ‰äº‹ä»¶çš„è¿æ¥éƒ½å¤„äºæŒ‚èµ·çŠ¶æ€ã€‚</p><h3 id=selector>Selector</h3><blockquote><p>å…è®¸ä¸€ä¸ªçº¿ç¨‹åŒæ—¶ç®¡ç†å¤šä¸ªChannelï¼Œé€‰æ‹©å™¨å¯ä»¥åœ¨éé˜»å¡çš„æ¨¡å¼ä¸‹é«˜æ•ˆå¤„ç†å¤šä¸ªè¿æ¥ï¼Œå‡å°‘çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ã€‚</p></blockquote><ul><li>é€‰æ‹©å™¨çš„æ ¸å¿ƒä½œç”¨</li></ul><ol><li>ç›‘æ§å¤šä¸ªé€šé“çš„çŠ¶æ€ï¼ˆç›‘å¬äº‹ä»¶ï¼‰</li><li>å‡å°‘çº¿ç¨‹æ•°é‡ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥ç®¡ç†å¤šä¸ªIOè¿æ¥</li><li>æé«˜æ€§èƒ½ï¼Œé¿å…ä¼ ç»Ÿé˜»å¡IOä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºçº¿ç¨‹çš„å¼€é”€</li></ol><ul><li>å·¥ä½œåŸç†</li></ul><ol><li><p><strong>æ³¨å†Œé€šé“</strong>ï¼šå°† <code>SelectableChannel</code>ï¼ˆå¦‚ <code>SocketChannel</code>ï¼‰æ³¨å†Œåˆ° <code>Selector</code>ï¼Œå¹¶æŒ‡å®šæ„Ÿå…´è¶£çš„äº‹ä»¶ï¼ˆå¦‚ <code>OP_READ</code>ã€<code>OP_WRITE</code>ï¼‰ã€‚</p></li><li><p><strong>ç›‘å¬äº‹ä»¶</strong>ï¼šè°ƒç”¨ <code>select()</code> æ–¹æ³•ï¼Œé˜»å¡ç›´åˆ°è‡³å°‘æœ‰ä¸€ä¸ªé€šé“å°±ç»ªã€‚</p></li><li><p><strong>å¤„ç†äº‹ä»¶</strong>ï¼šéå† <code>SelectionKey</code> é›†åˆï¼Œæ‰§è¡Œç›¸åº”çš„ I/O æ“ä½œã€‚</p></li></ol><ul><li>äº‹ä»¶</li></ul><div class=table-wrapper><table><thead><tr><th>äº‹ä»¶ç±»å‹äº‹ä»¶ç±»å‹</th><th>æè¿°æè¿°</th></tr></thead><tbody><tr><td><code>OP_ACCEPT</code></td><td>æœåŠ¡å™¨ç«¯ <code>ServerSocketChannel</code> æ¥æ”¶åˆ°æ–°çš„è¿æ¥è¯·æ±‚</td></tr><tr><td><code>OP_CONNECT</code></td><td>å®¢æˆ·ç«¯ <code>SocketChannel</code> è¿æ¥æˆåŠŸ</td></tr><tr><td><code>OP_READ</code></td><td>é€šé“ä¸­æœ‰æ•°æ®å¯è¯»</td></tr><tr><td><code>OP_WRITE</code></td><td>é€šé“å¯ä»¥å†™å…¥æ•°æ®</td></tr></tbody></table></div><p>ç”±java.nio.channels.spiç±»ä¸­åˆ›å»ºï¼Œå–ç³»ç»Ÿé»˜è®¤çš„java.nio.channels.spi.SelectorProviderã€‚</p><h3 id=linuxepoll>linuxï¼šepoll</h3><ul><li>å·¥ä½œåŸç†</li></ul><p><code>epoll_create()</code>ï¼šåˆ›å»º <code>epoll</code> å®ä¾‹ï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰ã€‚</p><p><code>epoll_ctl()</code>ï¼šå‘ <code>epoll</code> å®ä¾‹ä¸­æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰ã€‚</p><p><code>epoll_wait()</code>ï¼šç­‰å¾…äº‹ä»¶å‘ç”Ÿï¼Œå¹¶è¿”å›å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><ul><li>ç›¸æ¯”ä¼ ç»Ÿçš„ä¼˜ç‚¹</li></ul><ol><li>äº‹ä»¶é©±åŠ¨ï¼šç›¸æ¯” <code>select</code> å’Œ <code>poll</code>ï¼Œ<code>epoll</code> é‡‡ç”¨ <strong>äº‹ä»¶é©±åŠ¨</strong> æœºåˆ¶ï¼Œé¿å…äº†è½®è¯¢æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦çš„å¼€é”€ã€‚</li><li>å°±ç»ªåˆ—è¡¨ï¼š<code>epoll</code> ç»´æŠ¤ä¸€ä¸ª <strong>å°±ç»ªåˆ—è¡¨</strong>ï¼Œåªè¿”å›å‘ç”Ÿäº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œä¸æ˜¯éå†æ•´ä¸ª FD é›†åˆã€‚</li><li><strong>æ”¯æŒå¤§è§„æ¨¡è¿æ¥</strong>ï¼š<code>epoll</code> å¯ä»¥å¤„ç† <strong>ç™¾ä¸‡çº§åˆ«</strong> çš„è¿æ¥ï¼Œè€Œä¸ä¼šå› ä¸º FD æ•°é‡å¢åŠ è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li></ol><h3 id=macoså’Œbsdkqueue>macOSå’ŒBSDï¼škqueue</h3><ul><li>å·¥ä½œåŸç†ï¼š</li></ul><p><code>kqueue()</code>ï¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—ã€‚</p><p><code>kevent()</code>ï¼šç”¨äºæ³¨å†Œã€ä¿®æ”¹æˆ–åˆ é™¤äº‹ä»¶ï¼Œå¹¶ç­‰å¾…äº‹ä»¶å‘ç”Ÿã€‚</p><ul><li>ä¼˜ç‚¹ï¼š</li></ul><ol><li><strong>ä½å¼€é”€</strong>ï¼š<code>kqueue</code> é‡‡ç”¨ <strong>äº‹ä»¶é©±åŠ¨</strong> æœºåˆ¶ï¼Œå‡å°‘äº† CPU è½®è¯¢å¼€é”€ã€‚</li><li><strong>æ”¯æŒå¤šç§äº‹ä»¶ç±»å‹</strong>ï¼šä¸ä»…æ”¯æŒ <strong>I/O äº‹ä»¶</strong>ï¼Œè¿˜æ”¯æŒ <strong>è¿›ç¨‹ã€ä¿¡å·ã€å®šæ—¶å™¨</strong> ç­‰äº‹ä»¶ã€‚</li></ol><h3 id=windowsiocp>Windowsï¼šIOCP</h3><ul><li>å·¥ä½œåŸç†ï¼š</li></ul><p><code>CreateIoCompletionPort()</code>ï¼šåˆ›å»ºä¸€ä¸ªå®Œæˆç«¯å£ï¼ˆCompletion Portï¼‰ã€‚</p><p><code>PostQueuedCompletionStatus()</code>ï¼šç”¨äºæäº¤ I/O ä»»åŠ¡ã€‚</p><p><code>GetQueuedCompletionStatus()</code>ï¼šç”¨äºè·å–å®Œæˆçš„ I/O ä»»åŠ¡ã€‚</p><ul><li>ä¼˜ç‚¹ï¼š</li></ul><ol><li><strong>å¼‚æ­¥ I/O</strong>ï¼šIOCP é‡‡ç”¨ <strong>å¼‚æ­¥äº‹ä»¶é©±åŠ¨</strong> æœºåˆ¶ï¼Œå‡å°‘äº†çº¿ç¨‹åˆ‡æ¢å¼€é”€ã€‚</li><li><strong>é«˜ååé‡</strong>ï¼šIOCP é€‚ç”¨äº <strong>é«˜å¹¶å‘æœåŠ¡å™¨</strong>ï¼Œå¦‚ Windows Server ä¸Šçš„ Web æœåŠ¡å™¨ã€‚</li></ol><h3 id=å…¶ä»–ç³»ç»Ÿselectæˆ–poll>å…¶ä»–ç³»ç»Ÿï¼šselectæˆ–poll</h3><ul><li>å·¥ä½œåŸç†</li></ul><p><code>select()</code>ï¼šéå†æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œæ£€æŸ¥å“ªäº›æ˜¯å¯è¯»ã€å¯å†™æˆ–æœ‰å¼‚å¸¸ã€‚</p><p><code>poll()</code>ï¼šé‡‡ç”¨ç±»ä¼¼ <code>select</code> çš„æ–¹å¼ï¼Œä½†ä½¿ç”¨ <strong>åŠ¨æ€æ•°ç»„</strong> ä»£æ›¿å›ºå®šå¤§å°çš„ FD é›†åˆã€‚</p><ul><li>ç¼ºç‚¹ï¼š</li></ul><ol><li><strong>æ€§èƒ½è¾ƒä½</strong>ï¼š<code>select</code> éœ€è¦éå†æ•´ä¸ª FD é›†åˆï¼Œå¯¼è‡´ <strong>O(n)</strong> çº§åˆ«çš„æ—¶é—´å¤æ‚åº¦ã€‚</li><li><strong>FD é™åˆ¶</strong>ï¼š<code>select</code> åªèƒ½å¤„ç† <strong>1024</strong> ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œ <code>poll</code> æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚</li></ol><h3 id=æ€»ç»“>æ€»ç»“</h3><p>Java NIO é€‰æ‹©å™¨çš„å®ç°ä½äº <code>sun.nio.ch</code> åŒ…ä¸­ï¼Œä¸åŒæ“ä½œç³»ç»Ÿä¼šåŠ è½½ä¸åŒçš„ SelectorProviderï¼š</p><ul><li><strong>Linux</strong>ï¼š<code>sun.nio.ch.EPollSelectorImpl</code></li><li><strong>macOS / BSD</strong>ï¼š<code>sun.nio.ch.KQueueSelectorImpl</code></li><li><strong>Windows</strong>ï¼š<code>sun.nio.ch.WindowsSelectorImpl</code></li><li><strong>å…¶ä»–ç³»ç»Ÿ</strong>ï¼š<code>sun.nio.ch.PollSelectorImpl</code></li></ul><p>å½“ Java ç¨‹åºè°ƒç”¨ <code>Selector.open()</code> æ—¶ï¼ŒJVM ä¼šæ ¹æ®æ“ä½œç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å®ç°ã€‚</p><ul><li>æ€§èƒ½å¯¹æ¯”</li></ul><div class=table-wrapper><table><thead><tr><th>æ“ä½œç³»ç»Ÿ</th><th>åº•å±‚å®ç°</th><th>ä¸»è¦ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Linux</strong></td><td><code>epoll</code></td><td>é«˜æ•ˆäº‹ä»¶é©±åŠ¨ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡è¿æ¥</td></tr><tr><td><strong>macOS / BSD</strong></td><td><code>kqueue</code></td><td>ä½å¼€é”€ï¼Œæ”¯æŒå¤šç§äº‹ä»¶ç±»å‹</td></tr><tr><td><strong>Windows</strong></td><td><code>IOCP</code></td><td>å¼‚æ­¥ I/Oï¼Œé€‚ç”¨äºé«˜ååé‡æœåŠ¡å™¨</td></tr><tr><td><strong>å…¶ä»–ç³»ç»Ÿ</strong></td><td><code>select</code> / <code>poll</code></td><td>é€‚ç”¨äºè¾ƒæ—§ç³»ç»Ÿï¼Œä½†æ€§èƒ½è¾ƒä½</td></tr></tbody></table></div><blockquote><p>10ä¸‡çº§åˆ«çš„è¯·æ±‚IOå¤šè·¯å¯ä»¥å‹‰å¼ºå¤„ç†</p></blockquote><h3 id=ä¾ç„¶æœ‰ç¼ºç‚¹>ä¾ç„¶æœ‰ç¼ºç‚¹</h3><p>å½“è¿æ¥æ•°é‡å»ºç«‹çš„æ¯”è¾ƒå¤šï¼Œä¸”æ¯ä¸ªè¿æ¥æ”¶å‘éƒ½ç›¸å½“é¢‘ç¹æ—¶ï¼Œä¸€æ¬¡selectkeyæ“ä½œå¯èƒ½å°±ä¼šå‡ºç°ä¸Šä¸‡ä¸ªäº‹ä»¶éœ€è¦å¤„ç†ã€‚å¤§éƒ¨åˆ†è¯·æ±‚å¤„ç†æ…¢ï¼Œé€ æˆç”¨æˆ·ä½“éªŒæå·®ï¼Œä¸”å¯èƒ½å¯¼è‡´æœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†ï¼Œ</p><h2 id=ååº”å™¨æ¨¡å¼reactor>ååº”å™¨æ¨¡å¼ï¼ˆReactorï¼‰</h2><blockquote><p>ç”¨äºå¤„ç†å¹¶å‘è¯·æ±‚çš„äº‹ä»¶è®¾è®¡æ¨¡å¼ã€‚é€šè¿‡ä¸€ä¸ªä¸­å¤®äº‹ä»¶å¤„ç†å™¨ï¼ˆReactorï¼‰æ¥ç›‘å¬èµ„æºä¸Šçš„äº‹ä»¶ï¼Œåœ¨äº‹ä»¶å‘ç”Ÿæ—¶å°†è¿™äº›äº‹ä»¶åˆ†æ´¾åˆ°æ³¨å†Œçš„äº‹ä»¶å¤„ç†å™¨ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„å¹¶å‘å¤„ç†ã€‚èƒ½å¤Ÿåœ¨å•çº¿ç¨‹ä¸­ç®¡ç†å¤§é‡è¿æ¥ï¼Œæé«˜ç³»ç»Ÿçš„ååé‡å’Œå“åº”æ€§ã€‚</p></blockquote><ol><li>èµ„æºï¼ˆResourcesï¼‰<ul><li>èµ„æºæ˜¯ç”Ÿæˆäº‹ä»¶çš„å®ä½“ï¼Œå¦‚ç½‘ç»œè¿æ¥ï¼ˆSocket Handleï¼‰æˆ–æ–‡ä»¶æè¿°ç¬¦ã€‚</li><li>ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œæœåŠ¡å™¨ä¸­ï¼Œèµ„æºå¯èƒ½æ˜¯å®¢æˆ·ç«¯çš„ TCP è¿æ¥ã€‚</li></ul></li><li>åŒæ­¥äº‹ä»¶è§£å¤šè·¯å™¨ï¼ˆSynchronous Event Demultiplexerï¼‰<ul><li>ä½¿ç”¨äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰æ¥é˜»å¡ç­‰å¾…æ‰€æœ‰èµ„æºçš„äº‹ä»¶ã€‚</li><li>å½“èµ„æºå‡†å¤‡å¥½è¿›è¡ŒåŒæ­¥æ“ä½œä¸”ä¸ä¼šé˜»å¡æ—¶ï¼Œè§£å¤šè·¯å™¨å°†èµ„æºå‘é€åˆ°åˆ†å‘å™¨ã€‚</li><li>CSDN æ–‡ç« ï¼ˆweb:3ï¼‰æåˆ°ï¼Œè¿™éƒ¨åˆ†é€šå¸¸é€šè¿‡ selectã€poll æˆ– epoll ç­‰ç³»ç»Ÿè°ƒç”¨å®ç°ã€‚</li></ul></li><li>åˆ†å‘å™¨ï¼ˆDispatcherï¼‰<ul><li>è´Ÿè´£å¤„ç†è¯·æ±‚å¤„ç†å™¨çš„æ³¨å†Œå’Œæ³¨é”€ã€‚</li><li>å°†èµ„æºåˆ†å‘åˆ°ç›¸å…³çš„è¯·æ±‚å¤„ç†å™¨ï¼Œç¡®ä¿äº‹ä»¶è¢«æ­£ç¡®å¤„ç†ã€‚</li><li>ä¾‹å¦‚ï¼Œåˆ†å‘å™¨å¯èƒ½æ ¹æ®äº‹ä»¶ç±»å‹ï¼ˆå¦‚è¯»ã€å†™ã€å…³é—­ï¼‰è°ƒç”¨ä¸åŒçš„å¤„ç†å™¨ã€‚</li></ul></li><li>è¯·æ±‚å¤„ç†å™¨ï¼ˆRequest Handlersï¼‰<ul><li>åº”ç”¨ç¨‹åºå®šä¹‰çš„è¯·æ±‚å¤„ç†ç¨‹åºï¼Œè´Ÿè´£å¤„ç†ä¸èµ„æºç›¸å…³è”çš„è¯·æ±‚ã€‚</li><li>å¤„ç†å™¨é€šå¸¸æ˜¯åŒæ­¥è°ƒç”¨çš„ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚è¯»å–æ•°æ®æˆ–å‘é€å“åº”ã€‚</li></ul></li></ol><h3 id=å·¥ä½œåŸç†>å·¥ä½œåŸç†</h3><p>ååº”å™¨æ¨¡å¼çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>äº‹ä»¶å¾ªç¯æŒç»­ç›‘å¬èµ„æºä¸Šçš„äº‹ä»¶ï¼ˆå¦‚è¿æ¥å»ºç«‹ã€æ•°æ®åˆ°è¾¾ï¼‰ã€‚</li><li>å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒåŒæ­¥äº‹ä»¶è§£å¤šè·¯å™¨é€šçŸ¥åˆ†å‘å™¨ã€‚</li><li>åˆ†å‘å™¨æ ¹æ®äº‹ä»¶ç±»å‹è°ƒç”¨æ³¨å†Œçš„è¯·æ±‚å¤„ç†å™¨ã€‚</li><li>è¯·æ±‚å¤„ç†å™¨åŒæ­¥åœ°å¤„ç†äº‹ä»¶ï¼Œä¾‹å¦‚è¯»å–æ•°æ®æˆ–æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</li><li>æ•´ä¸ªè¿‡ç¨‹é€šå¸¸åœ¨å•çº¿ç¨‹ä¸­å®Œæˆï¼Œä½†å¯ä»¥ç»“åˆçº¿ç¨‹æ± å¤„ç†å¤æ‚ä»»åŠ¡ã€‚</li></ul><h3 id=ä¼˜åŠ¿>ä¼˜åŠ¿</h3><p><strong>æ¨¡å—åŒ–å’Œå¯é‡ç”¨æ€§</strong>ï¼šå°†ç¨‹åºç‰¹å®šä»£ç åˆ†ç¦»ä¸ºæ¨¡å—åŒ–ã€å¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚</p><p><strong>ç®€åŒ–å¹¶å‘</strong>ï¼šé€šè¿‡åŒæ­¥è°ƒç”¨å¤„ç†å™¨ï¼Œé¿å…äº†å¤šçº¿ç¨‹ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå‡å°‘äº†çº¿ç¨‹åˆ›å»ºã€é”€æ¯å’Œåˆ‡æ¢çš„å¼€é”€ã€‚</p><p><strong>é«˜æ•ˆå¤„ç†é«˜å¹¶å‘</strong>ï¼šå•ä¸ªçº¿ç¨‹å¯ä»¥å¤„ç†å¤§é‡è¿æ¥ï¼Œé€‚åˆé«˜ååé‡åœºæ™¯ï¼Œå¦‚ Web æœåŠ¡å™¨ã€‚</p><p>ä¾‹å¦‚ï¼Œåšå®¢å›­æ–‡ç« ï¼ˆweb:9ï¼‰æåˆ°ï¼Œååº”å™¨æ¨¡å¼ä»£æ›¿å¤šçº¿ç¨‹å¤„ç†æ–¹å¼ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºï¼Œæé«˜ååé‡ã€‚</p><h3 id=ç¼ºç‚¹>ç¼ºç‚¹</h3><p><strong>è°ƒè¯•å›°éš¾</strong>ï¼šç”±äºæ§åˆ¶æµçš„åè½¬ï¼ˆå¥½è±ååŸåˆ™ï¼šä¸è¦æ‰“ç”µè¯ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šæ‰“ç”µè¯ç»™ä½ ï¼‰ï¼Œè°ƒè¯•å¯èƒ½æ›´å¤æ‚ã€‚</p><p><strong>å¹¶å‘é™åˆ¶</strong>ï¼šåŒæ­¥è°ƒç”¨å¤„ç†å™¨å¯èƒ½é™åˆ¶æœ€å¤§å¹¶å‘æ€§ï¼Œå°¤å…¶åœ¨å¯¹ç§°å¤šå¤„ç†ï¼ˆSMPï¼‰ç¡¬ä»¶ä¸Šã€‚</p><p><strong>å¯æ‰©å±•æ€§</strong>ï¼šå—åŒæ­¥è°ƒç”¨å’Œè§£å¤šè·¯å™¨çš„é™åˆ¶ï¼Œæ‰©å±•åˆ°å¤§è§„æ¨¡å¹¶å‘å¯èƒ½éœ€è¦é¢å¤–çš„ä¼˜åŒ–ã€‚</p><h2 id=netty-ioæ¨¡å‹å•æœºå¤„ç†ç™¾ä¸‡çº§å¹¶å‘>Netty IOæ¨¡å‹ï¼ˆå•æœºå¤„ç†ç™¾ä¸‡çº§å¹¶å‘ï¼‰</h2><blockquote><p>ä¸»ä»Reactoræ¨¡å¼ï¼Œåœ¨ååº”å™¨å•çº¿ç¨‹çš„åŸºç¡€ä¸Šæä¾›å¹¶å‘èƒ½åŠ›ã€‚</p></blockquote><h3 id=ä¸»è¦ç»„ä»¶>ä¸»è¦ç»„ä»¶</h3><ol><li><strong>BossGroup</strong></li></ol><ul><li>è´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œç›¸å½“äºä¸»Reactorã€‚</li><li>æœ‰æ–°è¿æ¥æ—¶ï¼Œåˆ›å»ºNioSocketChannelå¹¶å°†å…¶æ³¨å†Œåˆ°WorkerGroupçš„æŸä¸ªNioEventLoopä¸Šã€‚</li><li>å¸¸è§„é»˜è®¤ä¸ºå•çº¿ç¨‹ï¼ˆå¯é…ç½®ï¼‰</li></ul><ol start=2><li><p><strong>WorkerGroup</strong></p><ul><li>è´Ÿè´£å¤„ç†å·²å»ºç«‹è¿æ¥çš„IOäº‹ä»¶ï¼Œå¦‚è¯»å†™æ“ä½œï¼Œç›¸å½“äºä»Reactorã€‚</li><li>å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œé»˜è®¤ä¸ºCPUæ ¸å¿ƒæ•°çš„ä¸¤å€ã€‚</li><li>æ¯ä¸ªWorkerGroupä¸­çš„NioEventLoopè½®è¯¢å…¶selectorï¼Œå¤„ç†æ³¨å†Œçš„Channeläº‹ä»¶</li></ul></li><li><p><strong>NioEventLoop</strong></p><ul><li>æ¯ä¸ªNioEventLoopåŒ…å«ä¸€ä¸ªSelectorï¼Œç”¨äºç›‘å¬ç»‘å®šåœ¨å…¶ä¸Šçš„SocketChannelçš„ç½‘ç»œé€šè®¯ã€‚<ul><li>è½®è¯¢read/writeäº‹ä»¶</li><li>å¤„ç†IOäº‹ä»¶å’Œä¸šåŠ¡é€»è¾‘</li><li>æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ï¼ˆrunAllTasksï¼‰ï¼Œå¤„ç†è€—æ—¶çš„ä»»åŠ¡ã€‚</li></ul></li></ul></li><li><p><strong>ChannelPipeline</strong></p><ul><li>æŠ½è±¡æ•°æ®ç®¡é“ï¼ŒåŒ…å«åŒå‘é“¾è¡¨çš„ChannelHandlerï¼Œç”¨äºæ‹¦æˆªå’Œå¤„ç†IOäº‹ä»¶ã€‚</li><li>æ”¯æŒæ·»åŠ ã€åˆ é™¤handlerï¼Œå¤„ç†å…¥ç«™å’Œå‡ºç«™äº‹ä»¶ã€‚</li></ul><blockquote><p>å…¥ç«™äº‹ä»¶ä»å¤´åˆ°å°¾èµ°handlerï¼Œå‡ºç«™äº‹ä»¶ä»å°¾åˆ°å¤´èµ°handler</p></blockquote></li></ol><h3 id=å·¥ä½œåŸç†-1>å·¥ä½œåŸç†</h3><ol><li>BossGroupç›‘å¬acceptäº‹ä»¶ï¼Œå½“æœ‰æ–°è¿æ¥æ—¶ï¼Œç”ŸæˆNioSocketChannelï¼Œå¹¶å°†å…¶æ³¨å†Œåˆ°WorkerGroupçš„æŸä¸ªNioEventLoopçš„Selectorä¸Šã€‚</li><li>WorkerGroupçš„NioEventLoopè½®è¯¢Selectorï¼Œå¤„ç†æ³¨å†Œçš„Channelä¸Šçš„è¯»å†™äº‹ä»¶ã€‚</li><li>å½“æœ‰IOäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé€šè¿‡ChannelPiplineä¸­çš„handleré“¾å¤„ç†æ•°æ®ï¼Œç¡®ä¿æ•°æ®æµçš„è¿ç»­æ€§å’Œé«˜æ•ˆæ€§ã€‚</li></ol><h3 id=ä¼˜ç‚¹>ä¼˜ç‚¹</h3><ul><li><strong>éé˜»å¡IO</strong>ï¼šIOæ“ä½œä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œçº¿ç¨‹å¯ä»¥åœ¨ç­‰å¾…IOå®Œæˆæ—¶å¤„ç†å…¶ä»–ä»»åŠ¡ã€‚ï¼ˆè¯»å†™æ“ä½œå¼‚æ­¥é€šçŸ¥ä¸šåŠ¡çº¿ç¨‹ï¼Œæ— éœ€é˜»å¡ï¼‰</li><li><strong>é«˜å¹¶å‘</strong>ï¼šé€šè¿‡å°‘é‡çº¿ç¨‹ç®¡ç†å¤§é‡å¹¶å‘ï¼Œå‡å°‘çº¿ç¨‹åˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚ï¼ˆæ”¯æŒç™¾ä¸‡çº§å¹¶å‘ï¼‰</li><li><strong>å¯æ‰©å±•(ä¼¸ç¼©æ€§)</strong>ï¼šä¸»ä»Reactoræ¨¡å¼å…è®¸é…ç½®â€œå¤šä¸»å¤šä»â€ï¼Œé€šè¿‡å¯åŠ¨å‚æ•°è°ƒæ•´çº¿ç¨‹æ± å¤§å°ã€‚</li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/netty/>Netty</a>
<a href=/tags/java/>Java</a>
<a href=/tags/io%E6%A8%A1%E5%9E%8B/>Ioæ¨¡å‹</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/%E8%AF%BBnetty-in-action%E6%9C%89%E6%84%9F/><div class=article-image><img src=/p/%E8%AF%BBnetty-in-action%E6%9C%89%E6%84%9F/nettyinac.4b936fec8eb554f2dfbdc656bbb2818e_hu_bde81e70e7a98525.png width=250 height=150 loading=lazy alt="Featured image of post è¯»ã€Šnetty in actionã€‹æœ‰æ„Ÿ" data-hash="md5-S5Nv7I61VPLfvcZWu7KBjg=="></div><div class=article-details><h2 class=article-title>è¯»ã€Šnetty in actionã€‹æœ‰æ„Ÿ</h2></div></a></article><article class=has-image><a href=/p/jdk25-2/><div class=article-image><img src=/p/jdk25-2/1.1ba2120bdc98acfe6bad936098ca47e2_hu_c3c5a234121bbeb2.png width=250 height=150 loading=lazy alt="Featured image of post å¤‡æˆ˜JDK25--å¹¶å‘" data-key=JDK25-2 data-hash="md5-G6ISC9yYrP5rrZNgmMpH4g=="></div><div class=article-details><h2 class=article-title>å¤‡æˆ˜JDK25--å¹¶å‘</h2></div></a></article><article class=has-image><a href=/p/jdk25-1/><div class=article-image><img src=/p/jdk25-1/1.a1fcd903c65bcaf940dee4edad9ec466_hu_64b6616386f91f8a.png width=250 height=150 loading=lazy alt="Featured image of post å¤‡æˆ˜JDK25--åƒåœ¾å›æ”¶å™¨" data-key=JDK25-1 data-hash="md5-ofzZA8ZbyvlA3uTtrZ7EZg=="></div><div class=article-details><h2 class=article-title>å¤‡æˆ˜JDK25--åƒåœ¾å›æ”¶å™¨</h2></div></a></article><article class=has-image><a href=/p/java21%E6%A0%B8%E5%BF%83%E5%BA%93--%E5%B9%B6%E5%8F%91/><div class=article-image><img src=/p/java21%E6%A0%B8%E5%BF%83%E5%BA%93--%E5%B9%B6%E5%8F%91/java21c.1b7f460a3c98bdb0e29c2b301cbb9563_hu_39f95a308fdd8fe2.png width=250 height=150 loading=lazy alt="Featured image of post JAVA21æ ¸å¿ƒåº“--å¹¶å‘" data-hash="md5-G39GCjyYvbDinCswHLuVYw=="></div><div class=article-details><h2 class=article-title>JAVA21æ ¸å¿ƒåº“--å¹¶å‘</h2></div></a></article><article class=has-image><a href=/p/%E8%AF%BB%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA2019%E7%89%88%E6%9C%89%E6%84%9F/><div class=article-image><img src=/p/%E8%AF%BB%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA2019%E7%89%88%E6%9C%89%E6%84%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BAv3.7a938c68cb8d638aedb4ae81627b8f0b_hu_76b6da958296544a.png width=250 height=150 loading=lazy alt="Featured image of post è¯»ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœº2019ç‰ˆã€‹æœ‰æ„Ÿ" data-hash="md5-epOMaMuNY4rttK6BYnuPCw=="></div><div class=article-details><h2 class=article-title>è¯»ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœº2019ç‰ˆã€‹æœ‰æ„Ÿ</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//thecoolboyhan.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2026 éŸ©æ°¸å‘çš„åšå®¢</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>