<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="å°å‚…å“¥çš„é‡‘å…¸ä¹¦ç±ï¼Œå¯¹è®¾è®¡æ¨¡å¼æœ‰ä¸ªç¬¼ç»Ÿçš„äº†è§£ã€‚ç›®å‰è¿˜åœ¨æ”»è¯»ä¸­ã€‚ã€‚"><title>è¯»ã€Šé‡å­¦javaè®¾è®¡æ¨¡å¼ã€‹æœ‰æ„Ÿ</title><link rel=canonical href=https://thecoolboyhan.github.io/p/java-ontwerp-patroon/><link rel=stylesheet href=/scss/style.min.833d6eed45de56f48306bf57268d5b8cdfc8a60e8e7bdc99810464fcd033f7c6.css><meta property='og:title' content="è¯»ã€Šé‡å­¦javaè®¾è®¡æ¨¡å¼ã€‹æœ‰æ„Ÿ"><meta property='og:description' content="å°å‚…å“¥çš„é‡‘å…¸ä¹¦ç±ï¼Œå¯¹è®¾è®¡æ¨¡å¼æœ‰ä¸ªç¬¼ç»Ÿçš„äº†è§£ã€‚ç›®å‰è¿˜åœ¨æ”»è¯»ä¸­ã€‚ã€‚"><meta property='og:url' content='https://thecoolboyhan.github.io/p/java-ontwerp-patroon/'><meta property='og:site_name' content='éŸ©æ°¸å‘çš„åšå®¢'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='è®¾è®¡æ¨¡å¼'><meta property='article:tag' content='è¯»åæ„Ÿ'><meta property='article:tag' content='æ¶æ„'><meta property='article:published_time' content='2025-09-09T00:00:00+00:00'><meta property='article:modified_time' content='2025-09-09T00:00:00+00:00'><meta property='og:image' content='https://thecoolboyhan.github.io/p/java-ontwerp-patroon/1.png'><meta name=twitter:title content="è¯»ã€Šé‡å­¦javaè®¾è®¡æ¨¡å¼ã€‹æœ‰æ„Ÿ"><meta name=twitter:description content="å°å‚…å“¥çš„é‡‘å…¸ä¹¦ç±ï¼Œå¯¹è®¾è®¡æ¨¡å¼æœ‰ä¸ªç¬¼ç»Ÿçš„äº†è§£ã€‚ç›®å‰è¿˜åœ¨æ”»è¯»ä¸­ã€‚ã€‚"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://thecoolboyhan.github.io/p/java-ontwerp-patroon/1.png'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_63165f4306fe5eb3.png width=300 height=400 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>éŸ©æ°¸å‘çš„åšå®¢</a></h1><h2 class=site-description>ç›®å‰äººåœ¨ä¸Šæµ·ï¼Œ20å¹´æ¯•ä¸šï¼Œæ™®é€šmuggleï¼Œjavaå¼€å‘ã€‚é‚®ç®±ï¼šhanyongfa2013@163.com ã€‚</h2></div></header><ol class=menu-social><li><a href=https://github.com/thecoolboyhan target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://leetcode.cn/u/thecoolboy/ target=_blank title=åŠ›æ‰£ rel=me><svg role="img" viewBox="0 0 24 24"><title>LeetCode</title><path d="M13.483.0a1.374 1.374.0 00-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266.0 00-1.209 2.104 5.35 5.35.0 00-.125.513 5.527 5.527.0 00.062 2.362 5.83 5.83.0 00.349 1.017 5.938 5.938.0 001.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378.0 00-1.951-.003l-2.396 2.392a3.021 3.021.0 01-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68.0 01.066-.523 2.545 2.545.0 01.619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.94-.207a1.384 1.384.0 00-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384.0 0013.483.0zm-2.866 12.815a1.38 1.38.0 00-1.38 1.382 1.38 1.38.0 001.38 1.382H20.79a1.38 1.38.0 001.38-1.382 1.38 1.38.0 00-1.38-1.382z"/></svg></a></li><li><a href=mailto:hanyongfa2013@163.com target=_blank title=é‚®ç®± rel=me><svg id="mdi-email-arrow-right-outline" viewBox="0 0 24 24"><path d="M13 19C13 18.66 13.04 18.33 13.09 18H4V8l8 5 8-5v5.09C20.72 13.21 21.39 13.46 22 13.81V6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18c0 1.1.9 2 2 2h9.09C13.04 19.67 13 19.34 13 19M20 6l-8 5L4 6H20m0 16V20H16V18h4V16l3 3-3 3z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ç¬¬äºŒç« 6å¤§è®¾è®¡åŸåˆ™>ç¬¬äºŒç« ã€6å¤§è®¾è®¡åŸåˆ™</a><ol><li><ol><li><a href=#1å•ä¸€èŒè´£åŸåˆ™>1ã€å•ä¸€èŒè´£åŸåˆ™</a></li><li><a href=#2å¼€é—­åŸåˆ™>2ã€å¼€é—­åŸåˆ™</a></li><li><a href=#3é‡Œæ°æ›¿æ¢åŸåˆ™>3ã€é‡Œæ°æ›¿æ¢åŸåˆ™</a></li><li><a href=#4è¿ªç±³ç‰¹æ³•åˆ™åŸåˆ™>4ã€è¿ªç±³ç‰¹æ³•åˆ™åŸåˆ™</a></li><li><a href=#5æ¥å£éš”ç¦»åŸåˆ™>5ã€æ¥å£éš”ç¦»åŸåˆ™</a></li><li><a href=#6ä¾èµ–å€’ç½®åŸåˆ™>6ã€ä¾èµ–å€’ç½®åŸåˆ™</a></li></ol></li></ol></li><li><a href=#ç¬¬å››ç« å·¥å‚æ¨¡å¼>ç¬¬å››ç« ã€å·¥å‚æ¨¡å¼</a><ol><li><a href=#ä»‹ç»>ä»‹ç»</a></li><li><a href=#æ¨¡æ‹Ÿå‘æ”¾å¤šç§å¥–å“>æ¨¡æ‹Ÿå‘æ”¾å¤šç§å¥–å“</a><ol><li><a href=#åä¾‹>åä¾‹</a></li><li><a href=#æ­£ä¾‹>æ­£ä¾‹</a></li></ol></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ol></li><li><a href=#æŠ½è±¡å·¥å‚æ¨¡å¼>æŠ½è±¡å·¥å‚æ¨¡å¼</a><ol><li><a href=#æ¡ˆä¾‹1>æ¡ˆä¾‹1</a></li><li><a href=#åˆ©ç”¨æŠ½è±¡å·¥å‚æ¥é‡æ„ä»£ç >åˆ©ç”¨æŠ½è±¡å·¥å‚æ¥é‡æ„ä»£ç </a></li><li><a href=#æ€»ç»“-1>æ€»ç»“</a></li></ol></li><li><a href=#åŸå‹æ¨¡å¼>åŸå‹æ¨¡å¼</a><ol><li><a href=#ä¸Šæœºè€ƒè¯•æ¡ˆä¾‹>ä¸Šæœºè€ƒè¯•æ¡ˆä¾‹</a></li><li><a href=#bad>bad</a></li><li><a href=#good>good</a></li><li><a href=#æ€»ç»“-2>æ€»ç»“</a></li></ol></li><li><a href=#å»ºé€ è€…æ¨¡å¼>å»ºé€ è€…æ¨¡å¼</a><ol><li><a href=#é€šè¿‡ä»£ç æ¨¡æ‹Ÿä¸€æ¬¡è£…ä¿®>é€šè¿‡ä»£ç æ¨¡æ‹Ÿä¸€æ¬¡è£…ä¿®</a></li><li><a href=#bad-1>bad</a></li><li><a href=#good-1>good</a></li><li><a href=#æ€»ç»“-3>æ€»ç»“</a></li></ol></li><li><a href=#å•ä¾‹æ¨¡å¼>å•ä¾‹æ¨¡å¼</a><ol><li><a href=#0é™æ€ç±»éå•ä¾‹æ¨¡å¼>0ã€é™æ€ç±»ï¼ˆéå•ä¾‹æ¨¡å¼ï¼‰</a></li><li><a href=#æ‡’æ±‰æ¨¡å¼çº¿ç¨‹ä¸å®‰å…¨>æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰</a></li><li><a href=#æ‡’æ±‰æ¨¡å¼çº¿ç¨‹å®‰å…¨>æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</a></li><li><a href=#é¥¿æ±‰æ¨¡å¼çº¿ç¨‹å®‰å…¨>é¥¿æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</a></li><li><a href=#ç±»çš„å†…éƒ¨ç±»çº¿ç¨‹å®‰å…¨>ç±»çš„å†…éƒ¨ç±»ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</a></li><li><a href=#åŒé‡é”æ ¡éªŒçº¿ç¨‹å®‰å…¨dcl>åŒé‡é”æ ¡éªŒï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰DCL</a></li><li><a href=#caså•ä¾‹çº¿ç¨‹å®‰å…¨>CASå•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</a></li><li><a href=#effective-javaä½œè€…æ¨èçš„æšä¸¾å•ä¾‹çº¿ç¨‹å®‰å…¨>Effective Javaä½œè€…æ¨èçš„æšä¸¾å•ä¾‹(çº¿ç¨‹å®‰å…¨)</a></li></ol></li><li><a href=#é€‚é…å™¨æ¨¡å¼>é€‚é…å™¨æ¨¡å¼</a></li><li><a href=#æ¡¥æ¥æ¨¡å¼>æ¡¥æ¥æ¨¡å¼</a><ol><li><a href=#å®ç°æ”¯ä»˜å’Œæ”¯ä»˜æ¨¡å¼çš„æ¨¡å¼åä¾‹>å®ç°æ”¯ä»˜å’Œæ”¯ä»˜æ¨¡å¼çš„æ¨¡å¼(åä¾‹)</a></li><li><a href=#ä½¿ç”¨æ¡¥æ¥æ¨¡å¼é‡æ„ä»£ç >ä½¿ç”¨æ¡¥æ¥æ¨¡å¼é‡æ„ä»£ç </a></li></ol></li><li><a href=#ç»„åˆæ¨¡å¼>ç»„åˆæ¨¡å¼</a><ol><li><a href=#ç»„åˆæ¨¡å¼åä¾‹>ç»„åˆæ¨¡å¼åä¾‹</a></li><li><a href=#åˆ©ç”¨ç»„åˆæ¨¡å¼é‡æ„ä»£ç >åˆ©ç”¨ç»„åˆæ¨¡å¼é‡æ„ä»£ç </a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/java-ontwerp-patroon/><img src=/p/java-ontwerp-patroon/1_hu_a5b020b199bc7548.png srcset="/p/java-ontwerp-patroon/1_hu_a5b020b199bc7548.png 800w, /p/java-ontwerp-patroon/1_hu_e875a101d0f343d2.png 1600w" width=800 height=533 loading=lazy alt="Featured image of post è¯»ã€Šé‡å­¦javaè®¾è®¡æ¨¡å¼ã€‹æœ‰æ„Ÿ"></a></div><div class=article-details><header class=article-category><a href=/categories/%E7%B2%BE%E9%80%89/>ç²¾é€‰
</a><a href=/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>è®¾è®¡æ¨¡å¼
</a><a href=/categories/%E6%9E%B6%E6%9E%84/>æ¶æ„</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/java-ontwerp-patroon/>è¯»ã€Šé‡å­¦javaè®¾è®¡æ¨¡å¼ã€‹æœ‰æ„Ÿ</a></h2><h3 class=article-subtitle>å°å‚…å“¥çš„é‡‘å…¸ä¹¦ç±ï¼Œå¯¹è®¾è®¡æ¨¡å¼æœ‰ä¸ªç¬¼ç»Ÿçš„äº†è§£ã€‚ç›®å‰è¿˜åœ¨æ”»è¯»ä¸­ã€‚ã€‚</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2025-09-09T00:00:00Z>Sep 09, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 34 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><blockquote><p>è®¾è®¡æ¨¡å¼çš„åŸåˆ™</p></blockquote><h2 id=ç¬¬äºŒç« 6å¤§è®¾è®¡åŸåˆ™>ç¬¬äºŒç« ã€6å¤§è®¾è®¡åŸåˆ™</h2><h4 id=1å•ä¸€èŒè´£åŸåˆ™>1ã€å•ä¸€èŒè´£åŸåˆ™</h4><p>å¯¹äºå¸¸éœ€è¦ä¿®æ”¹çš„ç±»ï¼Œä¸åº”å½“ç»´æŠ¤ä¸¤ä¸ªä»¥ä¸Šçš„èŒè´£ã€‚å¦‚ä¸€ä¸ªå®¢æˆ·ç±»ï¼Œä¸åº”å½“ç»´æŠ¤æ™®é€šå®¢æˆ·ï¼ŒåŒæ—¶ä¹Ÿç»´æŠ¤VIPå®¢æˆ·ã€‚</p><ul><li>å¸¸è§åšæ³•</li></ul><p>æ„é€ å®¢æˆ·åŠŸèƒ½çš„æ¥å£ï¼Œä¸åŒçš„å®¢æˆ·æœ‰ä¸åŒå®¢æˆ·çš„å®ç°ç±»ã€‚åœ¨å®ç°å®¢æˆ·åŠŸèƒ½æ—¶ï¼Œæ¯ç§å®¢æˆ·éƒ½æœ‰ä¸åŒçš„å®ç°ã€‚å®¢æˆ·ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸ä¼šåº”ä¸ºä¿®æ”¹äº†æ™®é€šå®¢æˆ·çš„åŠŸèƒ½è€Œå½±å“åˆ°VIPå®¢æˆ·çš„åŠŸèƒ½ã€‚</p><ul><li>ä¼˜ç‚¹</li></ul><p>é¿å…äº†å¤§é‡çš„if else</p><p>æ¯ç§å®ç°ä¹‹é—´è§£è€¦ï¼Œäº’ä¸å½±å“ã€‚</p><ul><li>ç¼ºç‚¹</li></ul><p>å¢åŠ ç»´æŠ¤æˆæœ¬ã€‚</p><p>éœ€è¦æ–°å»ºå¤§é‡å®ç°ç±»å’Œä»£ç ã€‚</p><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-04/1745222013194_1745222013217.png loading=lazy alt=1745222013194.png></p><ul><li>bad</li></ul><p><a class=link href=https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99/bad target=_blank rel=noopener>https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99/bad</a></p><ul><li>good</li></ul><p><a class=link href=https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99/good target=_blank rel=noopener>https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99/good</a></p><h4 id=2å¼€é—­åŸåˆ™>2ã€å¼€é—­åŸåˆ™</h4><blockquote><p>é¢å‘æŠ½è±¡ç¼–ç¨‹</p></blockquote><p>åº”ç”¨åªå®šä¹‰æŠ½è±¡ç»“æ„ï¼Œç”¨å®ç°æ¥æ‰©å±•ç»†èŠ‚ã€‚å¦‚åº”ç”¨è‡ªå·±çš„æ–¹æ³•ï¼Œå’Œè°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œå› åªè°ƒç”¨å…¶æŠ½è±¡ç±»ï¼Œå…·ä½“çš„æ‰§è¡Œéƒ½ç”±å®ç°ç±»æ¥ç¼–å†™ã€‚</p><p>å¦‚æœæƒ³æ·»åŠ æˆ–ä¿®æ”¹åŸæœ‰çš„åŠŸèƒ½ï¼Œå¯ä»¥é‡‡ç”¨ä¸åŒçš„å®ç°ç±»æ¥ç¼–å†™ã€‚</p><ul><li>é—®é¢˜</li></ul><p>å¦‚æœæ‰€æœ‰çš„æ–¹æ³•éƒ½ç”¨å®ç°ç±»æ¥å®ç°ï¼Œæ˜¯å¦åœ¨ä¿®æ”¹æ—¶ï¼Œè¿˜è¦ä¿®æ”¹è°ƒç”¨æ—¶åˆ›å»ºçš„å®ç°ç±»ã€‚å¦‚æœä»£ç è¿è¡Œæ—¶é—´å¸¸ï¼Œæ˜¯å¦ä¼šå¤šå‡ºè®¸å¤šæ— ç”¨çš„å®ç°ç±»ã€‚</p><ul><li>æ¡ˆä¾‹ä»£ç </li></ul><p><a class=link href=https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99 target=_blank rel=noopener>https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99</a></p><h4 id=3é‡Œæ°æ›¿æ¢åŸåˆ™>3ã€é‡Œæ°æ›¿æ¢åŸåˆ™</h4><blockquote><p>ç»§æ‰¿å¿…é¡»ç¡®ä¿è¶…ç±»æ‰€æ‹¥æœ‰çš„æ€§è´¨åœ¨å­ç±»ä¸­ä»ç„¶æˆç«‹ã€‚</p><p>â€œæ­£æ–¹å½¢ä¸æ˜¯é•¿æ–¹å½¢â€</p></blockquote><p>å­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚</p><ol><li>å­ç±»å¯ä»¥å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸èƒ½è¦†ç›–çˆ¶ç±»çš„éæŠ½è±¡æ–¹æ³•</li><li>å­ç±»å¯ä»¥å¢åŠ çˆ¶ç±»ç‰¹æœ‰çš„æ–¹æ³•</li><li>å½“å­ç±»çš„æ–¹æ³•é‡è½½çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„å‰ç½®æ¡ä»¶ï¼ˆå…¥å‚ï¼‰è¦æ¯”çˆ¶ç±»æ›´å®½æ¾</li><li>å½“å­ç±»çš„æ–¹æ³•å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼ˆé‡å†™ã€é‡è½½ã€å®ç°æŠ½è±¡æ–¹æ³•ï¼‰ï¼Œæ–¹æ³•çš„è¿”å›å€¼è¦æ¯”çˆ¶ç±»æ›´ä¸¥æ ¼æˆ–ä¸çˆ¶ç±»ç›¸ç­‰ã€‚</li></ol><h5 id=é‡Œæ°æ›¿æ¢çš„ä¼˜ç‚¹>é‡Œæ°æ›¿æ¢çš„ä¼˜ç‚¹</h5><ol><li>å®ç°å¼€é—­åŸåˆ™çš„é‡è¦æ–¹å¼ä¹‹ä¸€ï¼ˆä¸»è¦æ–¹å¼ï¼‰</li><li>ç»§æ‰¿ä¸­é‡å†™çˆ¶ç±»é€ æˆçš„å¯å¤ç”¨æ€§å˜å·®çš„é—®é¢˜ã€‚ï¼ˆè§£å†³äº†å‰é¢çš„ç–‘é—®ï¼‰</li><li>ä¸ºä¿®æ”¹æä¾›äº†æ­£ç¡®æ€§çš„ä¿è¯ï¼Œç±»çš„æ‰©å±•ä¸ä¼šç»™å·²æœ‰çš„ç³»ç»Ÿå¼•å…¥æ–°çš„é”™è¯¯ï¼Œé™ä½äº†ä»£ç å‡ºé”™çš„å¯èƒ½æ€§ã€‚</li><li>å¢åŠ å¥å£®æ€§ï¼ŒåŒæ—¶å˜æ›´æ—¶å¯ä»¥åšåˆ°éå¸¸å¥½çš„å…¼å®¹æ€§ï¼Œé™ä½é£é™©ã€‚</li></ol><ul><li><p>æ¡ˆä¾‹ä»£ç </p><p><a class=link href=https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99 target=_blank rel=noopener>https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99</a></p></li></ul><h4 id=4è¿ªç±³ç‰¹æ³•åˆ™åŸåˆ™>4ã€è¿ªç±³ç‰¹æ³•åˆ™åŸåˆ™</h4><blockquote><p>æœ€å°‘çŸ¥é“åŸåˆ™</p></blockquote><p>ä¸¤ä¸ªç±»ä¹‹é—´ä¸è¦æœ‰è¿‡å¤šçš„è€¦åˆå…³ç³»ï¼Œä¿æŒæœ€å°‘å…³è”æ€§ã€‚</p><p>æ¯ä¸ªå±‚çº§çš„ç±»éƒ½ä¹‹å’Œä¸è‡ªå·±ç›´æ¥å…³è”çš„å±‚çº§ç±»æ¥è°ƒç”¨ï¼Œä¸è¦å‡ºç°è·¨çº§è°ƒç”¨ã€‚ï¼ˆå¦‚ï¼šcontrollerä¸­è°ƒç”¨repositoryï¼‰</p><h4 id=5æ¥å£éš”ç¦»åŸåˆ™>5ã€æ¥å£éš”ç¦»åŸåˆ™</h4><blockquote><p>å®¢æˆ·ç«¯ä¸åº”è¯¥è¢«è¿«ä¾èµ–å®ƒä¸ä½¿ç”¨çš„æ–¹æ³•ã€‚</p></blockquote><p>ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚</p><ul><li>bad</li></ul><p>æ¥å£è®¾è®¡æ—¶ï¼Œä¸åº”è¯¥è®©å¤šæ•°å®ç°æ­¤æ¥å£çš„ç±»è¦å®ç°ä¸€äº›æ— ç”¨çš„æ¥å£ã€‚</p><ul><li>good</li></ul><p>ä¸€ä¸ªæœ‰å¤šä¸ªæ–¹æ³•çš„æ¥å£ï¼Œåº”å½“æ‹†æˆå¤šä¸ªæ¥å£ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”åŠŸèƒ½æ—¶ï¼Œæ‰å»å®ç°å¯¹åº”çš„æ¥å£ã€‚</p><ul><li><p>æ¡ˆä¾‹ä»£ç </p><p><a class=link href=https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99 target=_blank rel=noopener>https://github.com/thecoolboyhan/personStudy/tree/c831c28ba2b994c38d066ef825c147e4353dff1f/design_patterns/src/%E9%87%8D%E5%AD%A6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Section2/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99</a></p></li></ul><h4 id=6ä¾èµ–å€’ç½®åŸåˆ™>6ã€ä¾èµ–å€’ç½®åŸåˆ™</h4><p>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºåº•å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</p><h2 id=ç¬¬å››ç« å·¥å‚æ¨¡å¼>ç¬¬å››ç« ã€å·¥å‚æ¨¡å¼</h2><h3 id=ä»‹ç»>ä»‹ç»</h3><blockquote><p>å·¥å‚æ¨¡å¼æ˜¯åˆ›å»ºå‹è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œæä¾›äº†åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚</p></blockquote><p>å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å…¶å­ç±»è‡ªå·±å†³å®šå°†å“ªä¸€ä¸ªå·¥å‚ç±»å®ä¾‹åŒ–ï¼Œå·¥å‚æ¨¡å¼è®©åˆ›å»ºè¿‡ç¨‹å»¶è¿Ÿåˆ°å­ç±»ä¸­è¿›è¡Œã€‚</p><ul><li>ç¼ºç‚¹</li></ul><p>éœ€è¦æ²»ç†ï¼Œå¦‚æœå®ç°çš„ç±»æ¯”è¾ƒå¤šã€éš¾ä»¥ç»´æŠ¤ã€å¼€å‘æˆæœ¬é«˜ã€‚ï¼ˆéœ€è¦ç»“åˆä¸åŒçš„è®¾è®¡æ¨¡å¼é€æ­¥ä¼˜åŒ–ï¼‰</p><h3 id=æ¨¡æ‹Ÿå‘æ”¾å¤šç§å¥–å“>æ¨¡æ‹Ÿå‘æ”¾å¤šç§å¥–å“</h3><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-05/1748401855514_1748401855529.png loading=lazy alt=1748401855514.png></p><p>éœ€è¦å®Œæˆä¸Šé¢ä¸‰ç§å…‘æ¢æ–¹å¼ï¼š</p><p>å‘æ”¾ä¼˜æƒ åˆ¸éœ€è¦é˜²é‡ï¼Œå…‘æ¢å¡éœ€è¦å¡IDï¼Œå®ç‰©å•†å“</p><p>éœ€è¦å‘è´§ä½ç½®ï¼ˆå¯¹è±¡ä¸­å«æœ‰ï¼‰</p><h4 id=åä¾‹>åä¾‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>PrizeController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>PrizeController</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>AwardRes</span><span class=w> </span><span class=nf>awardToUser</span><span class=p>(</span><span class=n>AwardReq</span><span class=w> </span><span class=n>req</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>reqJson</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSONString</span><span class=p>(</span><span class=n>req</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>AwardRes</span><span class=w> </span><span class=n>awardRes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;å¥–å“å‘æ”¾å¼€å§‹{}ã€‚req:{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>req</span><span class=p>.</span><span class=na>getuId</span><span class=p>(),</span><span class=w> </span><span class=n>reqJson</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// æŒ‰ç…§ä¸åŒç±»å‹æ–¹æ³•å•†å“[1ä¼˜æƒ åˆ¸ã€2å®ç‰©å•†å“ã€3ç¬¬ä¸‰æ–¹å…‘æ¢å¡(çˆ±å¥‡è‰º)]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getAwardType</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>CouponService</span><span class=w> </span><span class=n>couponService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>CouponService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>CouponResult</span><span class=w> </span><span class=n>couponResult</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>couponService</span><span class=p>.</span><span class=na>sendCoupon</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getuId</span><span class=p>(),</span><span class=w> </span><span class=n>req</span><span class=p>.</span><span class=na>getAwardNumber</span><span class=p>(),</span><span class=w> </span><span class=n>req</span><span class=p>.</span><span class=na>getBizId</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=s>&#34;0000&#34;</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>couponResult</span><span class=p>.</span><span class=na>getCode</span><span class=p>()))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>awardRes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AwardRes</span><span class=p>(</span><span class=s>&#34;0000&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å‘æ”¾æˆåŠŸ&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>awardRes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AwardRes</span><span class=p>(</span><span class=s>&#34;0001&#34;</span><span class=p>,</span><span class=w> </span><span class=n>couponResult</span><span class=p>.</span><span class=na>getInfo</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getAwardType</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>2</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>GoodsService</span><span class=w> </span><span class=n>goodsService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>GoodsService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>DeliverReq</span><span class=w> </span><span class=n>deliverReq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DeliverReq</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setUserName</span><span class=p>(</span><span class=n>queryUserName</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getuId</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setUserPhone</span><span class=p>(</span><span class=n>queryUserPhoneNumber</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getuId</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setSku</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getAwardNumber</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setOrderId</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getBizId</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setConsigneeUserName</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getExtMap</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;consigneeUserName&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setConsigneeUserPhone</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getExtMap</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;consigneeUserPhone&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setConsigneeUserAddress</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getExtMap</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;consigneeUserAddress&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Boolean</span><span class=w> </span><span class=n>isSuccess</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>goodsService</span><span class=p>.</span><span class=na>deliverGoods</span><span class=p>(</span><span class=n>deliverReq</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>isSuccess</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>awardRes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AwardRes</span><span class=p>(</span><span class=s>&#34;0000&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å‘æ”¾æˆåŠŸ&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>awardRes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AwardRes</span><span class=p>(</span><span class=s>&#34;0001&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å‘æ”¾å¤±è´¥&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getAwardType</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>3</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>String</span><span class=w> </span><span class=n>bindMobileNumber</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>queryUserPhoneNumber</span><span class=p>(</span><span class=n>req</span><span class=p>.</span><span class=na>getuId</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>IQiYiCardService</span><span class=w> </span><span class=n>iQiYiCardService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IQiYiCardService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>iQiYiCardService</span><span class=p>.</span><span class=na>grantToken</span><span class=p>(</span><span class=n>bindMobileNumber</span><span class=p>,</span><span class=w> </span><span class=n>req</span><span class=p>.</span><span class=na>getAwardNumber</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>awardRes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AwardRes</span><span class=p>(</span><span class=s>&#34;0000&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å‘æ”¾æˆåŠŸ&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;å¥–å“å‘æ”¾å®Œæˆ{}ã€‚&#34;</span><span class=p>,</span><span class=w> </span><span class=n>req</span><span class=p>.</span><span class=na>getuId</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>Exception</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>error</span><span class=p>(</span><span class=s>&#34;å¥–å“å‘æ”¾å¤±è´¥{}ã€‚req:{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>req</span><span class=p>.</span><span class=na>getuId</span><span class=p>(),</span><span class=w> </span><span class=n>reqJson</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>awardRes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AwardRes</span><span class=p>(</span><span class=s>&#34;0001&#34;</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=na>getMessage</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>awardRes</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>queryUserName</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;èŠ±èŠ±&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>queryUserPhoneNumber</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;15200101232&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢ä»£ç ä¸­ä¸€å…±æœ‰ä¸‰ç§ç±»å‹çš„è¥é”€æ–¹å¼ï¼Œå°±é€šè¿‡ä¸‰ä¸ªif..elseæ¥å®ç°åŠŸèƒ½ã€‚å¦‚æœåç»­æ·»åŠ çš„æ–°çš„æ¨¡å¼ï¼Œè‡ªç„¶å°±æ˜¯æ–°çš„if..else</p><h4 id=æ­£ä¾‹>æ­£ä¾‹</h4><ul><li>å‘å¥–å“çš„æ¥å£</li></ul><p>æ‰€æœ‰å¥–å“å‘æ”¾ï¼Œä¸Šæ–¹ç±»åªéœ€è¦è°ƒç”¨æ¥å£ï¼Œæ¥å£çš„å®ç°ç”±å·¥å‚æ–¹æ³•äº§ç”Ÿ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>ICommodity</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>sendCommodity</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>bizId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>extMap</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å…‘æ¢å¡</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>CardCommodityService</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ICommodity</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>CardCommodityService</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// æ¨¡æ‹Ÿæ³¨å…¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//    private IQiYiCardService iQiYiCardService = new IQiYiCardService();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>sendCommodity</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>bizId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>extMap</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>mobile</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>queryUserMobile</span><span class=p>(</span><span class=n>uId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>iQiYiCardService</span><span class=p>.</span><span class=na>grantToken</span><span class=p>(</span><span class=n>mobile</span><span class=p>,</span><span class=w> </span><span class=n>bizId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;è¯·æ±‚å‚æ•°[çˆ±å¥‡è‰ºå…‘æ¢å¡] =&gt; uIdï¼š{} commodityIdï¼š{} bizIdï¼š{} extMapï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>bizId</span><span class=p>,</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSON</span><span class=p>(</span><span class=n>extMap</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æµ‹è¯•ç»“æœ[çˆ±å¥‡è‰ºå…‘æ¢å¡]ï¼šsuccess&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>queryUserMobile</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;15200101232&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>ä¼˜æƒ åˆ¸</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>CouponCommodityService</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ICommodity</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>CouponCommodityService</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>//    private CouponService couponService = new CouponService();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>sendCommodity</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>bizId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>extMap</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>CouponResult</span><span class=w> </span><span class=n>couponResult</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>couponService</span><span class=p>.</span><span class=na>sendCoupon</span><span class=p>(</span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>bizId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;è¯·æ±‚å‚æ•°[ä¼˜æƒ åˆ¸] =&gt; uIdï¼š{} commodityIdï¼š{} bizIdï¼š{} extMapï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>bizId</span><span class=p>,</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSON</span><span class=p>(</span><span class=n>extMap</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æµ‹è¯•ç»“æœ[ä¼˜æƒ åˆ¸]ï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSON</span><span class=p>(</span><span class=n>couponResult</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=s>&#34;0000&#34;</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>couponResult</span><span class=p>.</span><span class=na>getCode</span><span class=p>()))</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>(</span><span class=n>couponResult</span><span class=p>.</span><span class=na>getInfo</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å®ç‰©</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//å®ç‰©å•†å“</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>GoodsCommodityService</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ICommodity</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>GoodsCommodityService</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>GoodsService</span><span class=w> </span><span class=n>goodsService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>GoodsService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>sendCommodity</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>bizId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>extMap</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>DeliverReq</span><span class=w> </span><span class=n>deliverReq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DeliverReq</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setUserName</span><span class=p>(</span><span class=n>queryUserName</span><span class=p>(</span><span class=n>uId</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setUserPhone</span><span class=p>(</span><span class=n>queryUserPhoneNumber</span><span class=p>(</span><span class=n>uId</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setSku</span><span class=p>(</span><span class=n>commodityId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setOrderId</span><span class=p>(</span><span class=n>bizId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setConsigneeUserName</span><span class=p>(</span><span class=n>extMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;consigneeUserName&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setConsigneeUserPhone</span><span class=p>(</span><span class=n>extMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;consigneeUserPhone&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deliverReq</span><span class=p>.</span><span class=na>setConsigneeUserAddress</span><span class=p>(</span><span class=n>extMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;consigneeUserAddress&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Boolean</span><span class=w> </span><span class=n>isSuccess</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>goodsService</span><span class=p>.</span><span class=na>deliverGoods</span><span class=p>(</span><span class=n>deliverReq</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;è¯·æ±‚å‚æ•°[ä¼˜æƒ åˆ¸] =&gt; uIdï¼š{} commodityIdï¼š{} bizIdï¼š{} extMapï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>commodityId</span><span class=p>,</span><span class=w> </span><span class=n>bizId</span><span class=p>,</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSON</span><span class=p>(</span><span class=n>extMap</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æµ‹è¯•ç»“æœ[ä¼˜æƒ åˆ¸]ï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>isSuccess</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>isSuccess</span><span class=p>)</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>(</span><span class=s>&#34;å®ç‰©å•†å“å‘æ”¾å¤±è´¥&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>queryUserName</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;èŠ±èŠ±&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>queryUserPhoneNumber</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;15200101232&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å•†å“å·¥å‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//å•†å“å·¥å‚ï¼Œå¾—åˆ°ä¸åŒç±»å‹çš„æœåŠ¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>StoreFactory</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ICommodity</span><span class=w> </span><span class=nf>getCommodityService</span><span class=p>(</span><span class=n>Integer</span><span class=w> </span><span class=n>commodityType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=kc>null</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>commodityType</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>commodityType</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>CouponCommodityService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>commodityType</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>GoodsCommodityService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>3</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>commodityType</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>CardCommodityService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>(</span><span class=s>&#34;ä¸å­˜åœ¨çš„å•†å“æœåŠ¡ç±»å‹&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æ–¹æ³•è°ƒç”¨è€…åªéœ€è¦å‘å·¥å‚ä¸­è¾“å…¥æœåŠ¡ç±»å‹ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸åŒçš„å®ç°ã€‚åç»­æƒ³è¦æ‰©å±•ä¹Ÿåªéœ€è¦åœ¨å·¥å‚æ–¹æ³•ä¸­æ·»åŠ ï¼Œè°ƒç”¨è€…ä¸éœ€è¦å…³å¿ƒã€‚</p><h3 id=æ€»ç»“>æ€»ç»“</h3><ul><li>ä¼˜ç‚¹</li></ul><ol><li>é¿å…åˆ›å»ºè€…ä¸å…·ä½“çš„äº§å“é€»è¾‘è€¦åˆ</li><li>æ»¡è¶³å•ä¸€èŒè´£ï¼Œæ¯ä¸ªä¸šåŠ¡é€»è¾‘å®ç°éƒ½åœ¨æ‰€å±è‡ªå·±çš„ç±»ä¸­å®Œæˆ</li><li>æ»¡è¶³å¼€é—­åŸåˆ™ï¼Œæ— éœ€ä¿®æ”¹è°ƒç”¨æ–¹ï¼Œå°±å¯ä»¥åœ¨ç¨‹åºä¸­åŠ å…¥æ–°çš„äº§å“ç±»å‹</li></ol><h2 id=æŠ½è±¡å·¥å‚æ¨¡å¼>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><blockquote><p>æŠ½è±¡å·¥å‚ä¹Ÿç§°å…¶ä»–å·¥å‚çš„å·¥å‚ï¼Œå¯ä»¥åœ¨æŠ½è±¡å·¥å‚ä¸­åˆ›å»ºå‡ºå…¶ä»–å·¥å‚ï¼Œä¸å·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œéƒ½æ˜¯ç”¨æ¥è§£å†³æ¥å£é€‰æ‹©çš„é—®é¢˜ï¼ŒåŒæ ·å±äºåˆ›å»ºå‹æ¨¡å¼ã€‚</p></blockquote><h3 id=æ¡ˆä¾‹1>æ¡ˆä¾‹1</h3><ol><li>å¾ˆå¤šæœåŠ¡ç”¨åˆ°äº†Rediséœ€è¦ä¸€èµ·å‡çº§åˆ°é›†ç¾¤ã€‚</li><li>éœ€è¦å…¼å®¹é›†ç¾¤Aå’Œé›†ç¾¤Bï¼Œä¾¿äºåç»­çš„ç¾å¤‡ã€‚</li><li>ä¸¤å¥—é›†ç¾¤æä¾›çš„æ¥å£å’Œæ–¹æ³•å„æœ‰å·®å¼‚ï¼Œéœ€è¦åšé€‚é…ã€‚</li><li>ä¸èƒ½å½±å“åˆ°ç›®å‰æ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿã€‚</li></ol><p>ç›®å‰æœ‰ä¸¤ä¸ªé›†ç¾¤å’Œä¸€ä¸ªå•æœºredisç°åœ¨éœ€è¦åšæ•´åˆ</p><ul><li>é¡¹ç›®ç»“æ„ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>itstack-demo-design-2-00
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â””â”€â”€ main
</span></span><span class=line><span class=cl>        â””â”€â”€ java
</span></span><span class=line><span class=cl>            â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>                â”œâ”€â”€ matter
</span></span><span class=line><span class=cl>                â”‚   â”œâ”€â”€ EGM.java
</span></span><span class=line><span class=cl>                â”‚   â””â”€â”€ IIR.java
</span></span><span class=line><span class=cl>                â””â”€â”€ RedisUtils.java
</span></span></code></pre></td></tr></table></div></div><ul><li>åŸå•æœºredisä»£ç </li></ul><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-07/1753252779932_1753252779958.png loading=lazy alt=1753252779932.png></p><ul><li>é›†ç¾¤EGM</li></ul><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-07/1753253037454_1753253037498.png loading=lazy alt=1753253037454.png></p><ul><li>é›†ç¾¤IIR</li></ul><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-07/1753253072855_1753253072871.png loading=lazy alt=1753253072855.png></p><ul><li>ä¼ ç»Ÿif-elseæ¨¡å¼æ¥å®ç°è°ƒç”¨</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>CacheServiceImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>CacheService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>RedisUtils</span><span class=w> </span><span class=n>redisUtils</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RedisUtils</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>EGM</span><span class=w> </span><span class=n>egm</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>EGM</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>IIR</span><span class=w> </span><span class=n>iir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IIR</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>redisType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>redisType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>egm</span><span class=p>.</span><span class=na>gain</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>redisType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>iir</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>redisUtils</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>redisType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>redisType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>egm</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>redisType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>iir</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>redisUtils</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//... åŒç±»ä¸åšå¤ªå¤šå±•ç¤ºï¼Œå¯ä»¥ä¸‹è½½æºç è¿›è¡Œå‚è€ƒ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>æŒ‰ç…§ä¸Šé¢æ¨¡å¼ä¿®æ”¹ï¼Œå¦‚æœæ·»åŠ æ–°é›†ç¾¤ï¼Œåç»­è¿ç»´ä¼šéå¸¸å›°éš¾ã€‚</p></blockquote><h3 id=åˆ©ç”¨æŠ½è±¡å·¥å‚æ¥é‡æ„ä»£ç >åˆ©ç”¨æŠ½è±¡å·¥å‚æ¥é‡æ„ä»£ç </h3><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-07/1753263026952_1753263026973.png loading=lazy alt=1753263026952.png></p><p>åˆ©ç”¨ä»£ç†ç±»æ¥å®ç°æŠ½è±¡å·¥å‚çš„åˆ›å»ºå’Œè·å–ï¼Œåˆ©ç”¨é€‚é…å™¨æ¥é€‚é…ä¸åŒredisé›†ç¾¤ä¸­çš„ä¸åŒAPIã€‚</p><ul><li>ç»“æ„å›¾</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>itstack-demo-design-2-02
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â”œâ”€â”€ main
</span></span><span class=line><span class=cl>    â”‚   â””â”€â”€ java
</span></span><span class=line><span class=cl>    â”‚       â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>    â”‚           â”œâ”€â”€ factory    
</span></span><span class=line><span class=cl>    â”‚           â”‚   â”œâ”€â”€ impl
</span></span><span class=line><span class=cl>    â”‚           â”‚   â”‚   â”œâ”€â”€ EGMCacheAdapter.java 
</span></span><span class=line><span class=cl>    â”‚           â”‚   â”‚   â””â”€â”€ IIRCacheAdapter.java
</span></span><span class=line><span class=cl>    â”‚           â”‚   â”œâ”€â”€ ICacheAdapter.java
</span></span><span class=line><span class=cl>    â”‚           â”‚   â”œâ”€â”€ JDKInvocationHandler.java
</span></span><span class=line><span class=cl>    â”‚           â”‚   â””â”€â”€ JDKProxy.java
</span></span><span class=line><span class=cl>    â”‚           â”œâ”€â”€ impl
</span></span><span class=line><span class=cl>    â”‚           â”‚   â””â”€â”€ CacheServiceImpl.java    
</span></span><span class=line><span class=cl>    â”‚           â””â”€â”€ CacheService.java 
</span></span><span class=line><span class=cl>    â””â”€â”€ test
</span></span><span class=line><span class=cl>         â””â”€â”€ java
</span></span><span class=line><span class=cl>             â””â”€â”€ org.itstack.demo.design.test
</span></span><span class=line><span class=cl>                 â””â”€â”€ ApiTest.java
</span></span></code></pre></td></tr></table></div></div><ol><li>ICacheAdapter:é€‚é…æ¥å£ï¼Œåˆ†åˆ«åŒ…è£…ä¸¤ä¸ªé›†ç¾¤ä¸­å·®å¼‚åŒ–çš„æ¥å£åç§°ã€‚EGMCacheAdapter<code>ã€</code>IIRCacheAdapter</li><li><code>JDKProxy</code>ã€<code>JDKInvocationHandler</code>ï¼Œæ˜¯ä»£ç†ç±»çš„å®šä¹‰å’Œå®ç°ï¼Œè¿™éƒ¨åˆ†ä¹Ÿå°±æ˜¯æŠ½è±¡å·¥å‚çš„å¦å¤–ä¸€ç§å®ç°æ–¹å¼ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼å¯ä»¥å¾ˆå¥½çš„æŠŠåŸæœ‰æ“ä½œRedisçš„æ–¹æ³•è¿›è¡Œä»£ç†æ“ä½œï¼Œé€šè¿‡æ§åˆ¶ä¸åŒçš„å…¥å‚å¯¹è±¡ï¼Œæ§åˆ¶ç¼“å­˜çš„ä½¿ç”¨ã€‚</li></ol><ul><li>é€‚é…å™¨æ¥å£</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>ICacheAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>timeout</span><span class=p>,</span><span class=w> </span><span class=n>TimeUnit</span><span class=w> </span><span class=n>timeUnit</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>del</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>ä¸¤ä¸ªé›†ç¾¤å¯¹äºé€‚é…å™¨çš„ä¸åŒå®ç°</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>EGMCacheAdapter</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ICacheAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>EGM</span><span class=w> </span><span class=n>egm</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>EGM</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>egm</span><span class=p>.</span><span class=na>gain</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>egm</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>timeout</span><span class=p>,</span><span class=w> </span><span class=n>TimeUnit</span><span class=w> </span><span class=n>timeUnit</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>egm</span><span class=p>.</span><span class=na>setEx</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=n>timeout</span><span class=p>,</span><span class=w> </span><span class=n>timeUnit</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>del</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>egm</span><span class=p>.</span><span class=na>delete</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>IIRCacheAdapter</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ICacheAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>IIR</span><span class=w> </span><span class=n>iir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IIR</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>iir</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>iir</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>timeout</span><span class=p>,</span><span class=w> </span><span class=n>TimeUnit</span><span class=w> </span><span class=n>timeUnit</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>iir</span><span class=p>.</span><span class=na>setExpire</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=n>timeout</span><span class=p>,</span><span class=w> </span><span class=n>timeUnit</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>del</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>iir</span><span class=p>.</span><span class=na>del</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>æŠ½è±¡å·¥å‚çš„ä»£ç†ç±»</li></ul><p>JDKåŠ¨æ€ä»£ç†JDKProxy</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=nf>getProxy</span><span class=p>(</span><span class=n>Class</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>interfaceClass</span><span class=p>,</span><span class=w> </span><span class=n>ICacheAdapter</span><span class=w> </span><span class=n>cacheAdapter</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>InvocationHandler</span><span class=w> </span><span class=n>handler</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>JDKInvocationHandler</span><span class=p>(</span><span class=n>cacheAdapter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ClassLoader</span><span class=w> </span><span class=n>classLoader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Thread</span><span class=p>.</span><span class=na>currentThread</span><span class=p>().</span><span class=na>getContextClassLoader</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Class</span><span class=o>&lt;?&gt;[]</span><span class=w> </span><span class=n>classes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>interfaceClass</span><span class=p>.</span><span class=na>getInterfaces</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>T</span><span class=p>)</span><span class=w> </span><span class=n>Proxy</span><span class=p>.</span><span class=na>newProxyInstance</span><span class=p>(</span><span class=n>classLoader</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Class</span><span class=o>[]</span><span class=p>{</span><span class=n>classes</span><span class=o>[</span><span class=n>0</span><span class=o>]</span><span class=p>},</span><span class=w> </span><span class=n>handler</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><strong>JDKInvocationHandler</strong>è¯¦ç»†invokeçš„æ–¹æ³•ï¼Œé€šè¿‡é€‚é…å™¨æ¥è¿›è¡Œè°ƒç”¨</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>JDKInvocationHandler</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>InvocationHandler</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>ICacheAdapter</span><span class=w> </span><span class=n>cacheAdapter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>JDKInvocationHandler</span><span class=p>(</span><span class=n>ICacheAdapter</span><span class=w> </span><span class=n>cacheAdapter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>cacheAdapter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cacheAdapter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=nf>invoke</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>proxy</span><span class=p>,</span><span class=w> </span><span class=n>Method</span><span class=w> </span><span class=n>method</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Throwable</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ICacheAdapter</span><span class=p>.</span><span class=na>class</span><span class=p>.</span><span class=na>getMethod</span><span class=p>(</span><span class=n>method</span><span class=p>.</span><span class=na>getName</span><span class=p>(),</span><span class=w> </span><span class=n>ClassLoaderUtils</span><span class=p>.</span><span class=na>getClazzByArgs</span><span class=p>(</span><span class=n>args</span><span class=p>)).</span><span class=na>invoke</span><span class=p>(</span><span class=n>cacheAdapter</span><span class=p>,</span><span class=w> </span><span class=n>args</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>åç»­æ‰©å±•</li></ul><ol><li>æ·»åŠ æ–°çš„é€‚é…å™¨ï¼Œå®ç°ICacheAdapteræ¥å£ï¼Œå¹¶å®ç°ç›¸åº”çš„æ–¹æ³•</li><li>è°ƒç”¨æ—¶é€šè¿‡JDKProxyåŠ¨æ€ä»£ç†åˆ›å»ºç±»ï¼Œåˆ›å»º1ä¸­å®ç°çš„é€‚é…å™¨</li><li>åç»­è°ƒç”¨åªéœ€åˆ©ç”¨ä¹‹å‰çš„åŠ¨æ€ä»£ç†åˆ›å»ºæ–°çš„ä»£ç†ç±»ï¼Œè°ƒç”¨ç­‰APIå…¨éƒ¨ç›¸åŒ</li></ol><p>JDKProxy.getProxy(CacheServiceImpl.class, new EGMCacheAdapter());</p><blockquote><p>çœŸæ­£æ„ä¹‰ä¸Šå¯¹ç°æœ‰ä»£ç å®Œå…¨æ— ä¾µå…¥</p></blockquote><h3 id=æ€»ç»“-1>æ€»ç»“</h3><p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œè§£å†³çš„é—®é¢˜ä¸ºåœ¨ä¸€ä¸ªäº§å“æ—ä¸­ï¼Œå­˜åœ¨å¤šä¸ªä¸åŒç±»å‹çš„äº§å“ï¼ˆredisé›†ç¾¤ï¼Œæ“ä½œç³»ç»Ÿï¼‰æƒ…å†µä¸‹ï¼Œæ¥å£é€‰æ‹©é—®é¢˜ã€‚</p><p>æœ¬è®¾è®¡æ»¡è¶³ï¼šå•ä¸€èŒè´£ã€å¼€é—­åŸåˆ™ã€è§£è€¦ç­‰ä¼˜ç‚¹ï¼Œä½†å¦‚æœè¯´éšç€ä¸šåŠ¡çš„ä¸æ–­æ‹“å±•ï¼Œå¯èƒ½ä¼šé€ æˆç±»å®ç°ä¸Šçš„å¤æ‚åº¦ã€‚ä½†ä¹Ÿå¯ä»¥è¯´ç®—ä¸ä¸Šç¼ºç‚¹ï¼Œå› ä¸ºå¯ä»¥éšç€å…¶ä»–è®¾è®¡æ–¹å¼çš„å¼•å…¥å’Œä»£ç†ç±»ä»¥åŠè‡ªåŠ¨ç”ŸæˆåŠ è½½çš„æ–¹å¼é™ä½æ­¤é¡¹ç¼ºç‚¹ã€‚</p><h2 id=åŸå‹æ¨¡å¼>åŸå‹æ¨¡å¼</h2><blockquote><p>åŸå‹æ¨¡å¼ä¸»è¦è§£å†³çš„é—®é¢˜å°±æ˜¯åˆ›å»ºé‡å¤å¯¹è±¡ï¼Œè€Œè¿™éƒ¨åˆ†å¯¹è±¡å†…å®¹æ¯”è¾ƒå¤æ‚ï¼Œç”Ÿæˆè¿‡ç¨‹å¯èƒ½ä»åº“æˆ–è€…RPCæ¥å£ä¸­è·å–æ•°æ®çš„è€—æ—¶æ¯”è¾ƒé•¿ï¼Œå› æ­¤é‡‡ç”¨å…‹éš†çš„æ–¹å¼èŠ‚çœæ—¶é—´ã€‚</p></blockquote><h3 id=ä¸Šæœºè€ƒè¯•æ¡ˆä¾‹>ä¸Šæœºè€ƒè¯•æ¡ˆä¾‹</h3><blockquote><p>éœ€è¦å®ç°ä¸€ä¸ªä¸Šçº§è€ƒè¯•æŠ½é¢˜çš„æœåŠ¡</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>itstack-demo-design-4-00
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â””â”€â”€ main
</span></span><span class=line><span class=cl>        â””â”€â”€ java
</span></span><span class=line><span class=cl>            â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>                â”œâ”€â”€ AnswerQuestion.java
</span></span><span class=line><span class=cl>                â””â”€â”€ ChoiceQuestion.java
</span></span></code></pre></td></tr></table></div></div><ul><li>é€‰æ‹©é¢˜</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ChoiceQuestion</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>                 </span><span class=c1>// é¢˜ç›®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>option</span><span class=p>;</span><span class=w>  </span><span class=c1>// é€‰é¡¹ï¼›Aã€Bã€Cã€D</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>;</span><span class=w>                  </span><span class=c1>// ç­”æ¡ˆï¼›B</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ChoiceQuestion</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ChoiceQuestion</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>option</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>option</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>option</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>key</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...get/set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>é—®ç­”é¢˜</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>AnswerQuestion</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>  </span><span class=c1>// é—®é¢˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>;</span><span class=w>   </span><span class=c1>// ç­”æ¡ˆ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>AnswerQuestion</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>AnswerQuestion</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>key</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...get/set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=bad>bad</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>itstack-demo-design-4-01
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â””â”€â”€ main
</span></span><span class=line><span class=cl>        â””â”€â”€ java
</span></span><span class=line><span class=cl>            â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>                â””â”€â”€ QuestionBankController.java
</span></span></code></pre></td></tr></table></div></div><ul><li>æ¢­å“ˆ</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>QuestionBankController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>createPaper</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>candidate</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>ChoiceQuestion</span><span class=o>&gt;</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>ChoiceQuestion</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>AnswerQuestion</span><span class=o>&gt;</span><span class=w> </span><span class=n>answerQuestionList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>AnswerQuestion</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map01</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 EE&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 Card&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 ME&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 HE&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;E&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 SE&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map02</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºçš„mainæ–¹æ³•å¿…é¡»å†™åœ¨ç±»é‡Œé¢&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªmainæ–¹æ³•&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºä¸­ç±»åå¿…é¡»ä¸æ–‡ä»¶åä¸€æ ·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºçš„mainæ–¹æ³•ä¸­å¦‚æœåªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¯ä»¥ä¸ç”¨{}(å¤§æ‹¬å·)æ‹¬èµ·æ¥&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map03</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å˜é‡ç”±å­—æ¯ã€ä¸‹åˆ’çº¿ã€æ•°å­—ã€$ç¬¦å·éšæ„ç»„æˆï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å˜é‡ä¸èƒ½ä»¥æ•°å­—ä½œä¸ºå¼€å¤´ï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Aå’Œaåœ¨javaä¸­æ˜¯åŒä¸€ä¸ªå˜é‡ï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ä¸åŒç±»å‹çš„å˜é‡ï¼Œå¯ä»¥èµ·ç›¸åŒçš„åå­—ï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map04</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;STRING&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;x3x;&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;void&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;de$f&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map05</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;31&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;0&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;1&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;2&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;JAVAæ‰€å®šä¹‰çš„ç‰ˆæœ¬ä¸­ä¸åŒ…æ‹¬&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map01</span><span class=p>,</span><span class=w> </span><span class=s>&#34;D&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map02</span><span class=p>,</span><span class=w> </span><span class=s>&#34;A&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;å˜é‡å‘½åè§„èŒƒè¯´æ³•æ­£ç¡®çš„æ˜¯&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map03</span><span class=p>,</span><span class=w> </span><span class=s>&#34;B&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;ä»¥ä¸‹()ä¸æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map04</span><span class=p>,</span><span class=w> </span><span class=s>&#34;C&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;è¡¨è¾¾å¼(11+3*8)/4%3çš„å€¼æ˜¯&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map05</span><span class=p>,</span><span class=w> </span><span class=s>&#34;D&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;å°çº¢é©¬å’Œå°é»‘é©¬ç”Ÿçš„å°é©¬å‡ æ¡è…¿&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;4æ¡è…¿&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;é“æ£’æ‰“å¤´ç–¼è¿˜æ˜¯æœ¨æ£’æ‰“å¤´ç–¼&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å¤´æœ€ç–¼&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;ä»€ä¹ˆåºŠä¸èƒ½ç¡è§‰&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç‰™åºŠ&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;ä¸ºä»€ä¹ˆå¥½é©¬ä¸åƒå›å¤´è‰&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;åé¢çš„è‰æ²¡äº†&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è¾“å‡ºç»“æœ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>StringBuilder</span><span class=w> </span><span class=n>detail</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>(</span><span class=s>&#34;è€ƒç”Ÿï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>candidate</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;è€ƒå·ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>number</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;--------------------------------------------\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;ä¸€ã€é€‰æ‹©é¢˜&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>size</span><span class=p>();</span><span class=w> </span><span class=n>idx</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç¬¬&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>idx</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;é¢˜ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getName</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>option</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getOption</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>option</span><span class=p>.</span><span class=na>keySet</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>key</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>option</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>key</span><span class=p>)).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç­”æ¡ˆï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getKey</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;äºŒã€é—®ç­”é¢˜&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>size</span><span class=p>();</span><span class=w> </span><span class=n>idx</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç¬¬&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>idx</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;é¢˜ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getName</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç­”æ¡ˆï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getKey</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>detail</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=good>good</h3><p>åŸå‹æ¨¡å¼è§£å†³çš„é—®é¢˜ä¸ºåˆ›å»ºå¤§é‡é‡å¤çš„ç±»ã€‚</p><p>é‡å¤åˆ›å»ºæœ‰æ—¶éœ€è¦ç”¨åˆ°è¿œç¨‹RPCè°ƒç”¨ï¼Œå°†æ¶ˆè€—å¤§é‡çš„æ—¶é—´ã€‚åŸå‹æ¨¡å¼åˆ©ç”¨æœ¬åœ°å…‹éš†çš„æ–¹å¼ã€‚</p><blockquote><p>åœ¨éœ€è¦ç”¨åˆ°å…‹éš†çš„ç±»ä¸­éƒ½éœ€è¦å®ç° <code>implements Cloneable</code> æ¥å£ã€‚</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>itstack-demo-design-4-02
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â”œâ”€â”€ main
</span></span><span class=line><span class=cl>    â”‚   â””â”€â”€ java
</span></span><span class=line><span class=cl>    â”‚       â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>    â”‚           â”œâ”€â”€ util
</span></span><span class=line><span class=cl>    â”‚           â”‚   â”œâ”€â”€ Topic.java
</span></span><span class=line><span class=cl>    â”‚           â”‚   â””â”€â”€ TopicRandomUtil.java
</span></span><span class=line><span class=cl>    â”‚           â”œâ”€â”€ QuestionBank.java
</span></span><span class=line><span class=cl>    â”‚           â””â”€â”€ QuestionBankController.java 
</span></span><span class=line><span class=cl>    â””â”€â”€ test
</span></span><span class=line><span class=cl>         â””â”€â”€ java
</span></span><span class=line><span class=cl>             â””â”€â”€ org.itstack.demo.design.test
</span></span><span class=line><span class=cl>                 â””â”€â”€ ApiTest.java
</span></span></code></pre></td></tr></table></div></div><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-07/1753345440048_1753345440072.png loading=lazy alt=1753345440048.png></p><ul><li>é¢˜ç›®é€‰é¡¹æ‰“ä¹±</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * ä¹±åºMapå…ƒç´ ï¼Œè®°å½•å¯¹åº”ç­”æ¡ˆkey
</span></span></span><span class=line><span class=cl><span class=cm> * @param option é¢˜ç›®
</span></span></span><span class=line><span class=cl><span class=cm> * @param key    ç­”æ¡ˆ
</span></span></span><span class=line><span class=cl><span class=cm> * @return Topic ä¹±åºå {A=c., B=d., C=a., D=b.}
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>static</span><span class=w> </span><span class=kd>public</span><span class=w> </span><span class=n>Topic</span><span class=w> </span><span class=nf>random</span><span class=p>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>option</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Set</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>keySet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>option</span><span class=p>.</span><span class=na>keySet</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>keyList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=p>(</span><span class=n>keySet</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Collections</span><span class=p>.</span><span class=na>shuffle</span><span class=p>(</span><span class=n>keyList</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>optionNew</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>keyNew</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>next</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>keySet</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>randomKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>keyList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=o>++</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>key</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>next</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>keyNew</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>randomKey</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>optionNew</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>randomKey</span><span class=p>,</span><span class=w> </span><span class=n>option</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>next</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Topic</span><span class=p>(</span><span class=n>optionNew</span><span class=p>,</span><span class=w> </span><span class=n>keyNew</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å…‹éš†å¯¹è±¡å¤„ç†</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>QuestionBank</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Cloneable</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>candidate</span><span class=p>;</span><span class=w> </span><span class=c1>// è€ƒç”Ÿ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>;</span><span class=w>    </span><span class=c1>// è€ƒå·</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>ChoiceQuestion</span><span class=o>&gt;</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>ChoiceQuestion</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>AnswerQuestion</span><span class=o>&gt;</span><span class=w> </span><span class=n>answerQuestionList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>AnswerQuestion</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>QuestionBank</span><span class=w> </span><span class=nf>append</span><span class=p>(</span><span class=n>ChoiceQuestion</span><span class=w> </span><span class=n>choiceQuestion</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>choiceQuestion</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>QuestionBank</span><span class=w> </span><span class=nf>append</span><span class=p>(</span><span class=n>AnswerQuestion</span><span class=w> </span><span class=n>answerQuestion</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>answerQuestion</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=nf>clone</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>CloneNotSupportedException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>QuestionBank</span><span class=w> </span><span class=n>questionBank</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>QuestionBank</span><span class=p>)</span><span class=w> </span><span class=kd>super</span><span class=p>.</span><span class=na>clone</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>questionBank</span><span class=p>.</span><span class=na>choiceQuestionList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>ChoiceQuestion</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>clone</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>questionBank</span><span class=p>.</span><span class=na>answerQuestionList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>AnswerQuestion</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>clone</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// é¢˜ç›®ä¹±åº</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Collections</span><span class=p>.</span><span class=na>shuffle</span><span class=p>(</span><span class=n>questionBank</span><span class=p>.</span><span class=na>choiceQuestionList</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Collections</span><span class=p>.</span><span class=na>shuffle</span><span class=p>(</span><span class=n>questionBank</span><span class=p>.</span><span class=na>answerQuestionList</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ç­”æ¡ˆä¹±åº</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>ChoiceQuestion</span><span class=o>&gt;</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>questionBank</span><span class=p>.</span><span class=na>choiceQuestionList</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>ChoiceQuestion</span><span class=w> </span><span class=n>question</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Topic</span><span class=w> </span><span class=n>random</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>TopicRandomUtil</span><span class=p>.</span><span class=na>random</span><span class=p>(</span><span class=n>question</span><span class=p>.</span><span class=na>getOption</span><span class=p>(),</span><span class=w> </span><span class=n>question</span><span class=p>.</span><span class=na>getKey</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>question</span><span class=p>.</span><span class=na>setOption</span><span class=p>(</span><span class=n>random</span><span class=p>.</span><span class=na>getOption</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>question</span><span class=p>.</span><span class=na>setKey</span><span class=p>(</span><span class=n>random</span><span class=p>.</span><span class=na>getKey</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>questionBank</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setCandidate</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>candidate</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>candidate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>candidate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setNumber</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>number</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>number</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>toString</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>StringBuilder</span><span class=w> </span><span class=n>detail</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>(</span><span class=s>&#34;è€ƒç”Ÿï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>candidate</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;è€ƒå·ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>number</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;--------------------------------------------\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;ä¸€ã€é€‰æ‹©é¢˜&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>size</span><span class=p>();</span><span class=w> </span><span class=n>idx</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç¬¬&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>idx</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;é¢˜ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getName</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>option</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getOption</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>option</span><span class=p>.</span><span class=na>keySet</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>key</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>option</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>key</span><span class=p>)).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n&#34;</span><span class=p>);;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç­”æ¡ˆï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>choiceQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getKey</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;äºŒã€é—®ç­”é¢˜&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>idx</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>size</span><span class=p>();</span><span class=w> </span><span class=n>idx</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç¬¬&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>idx</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;é¢˜ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getName</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ç­”æ¡ˆï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>answerQuestionList</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>idx</span><span class=p>).</span><span class=na>getKey</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;\r\n\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>detail</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>åˆå§‹åŒ–è¯•å·</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>QuestionBankController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>QuestionBank</span><span class=w> </span><span class=n>questionBank</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>QuestionBank</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>QuestionBankController</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map01</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 EE&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 Card&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 ME&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 HE&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map01</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;E&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVA2 SE&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map02</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºçš„mainæ–¹æ³•å¿…é¡»å†™åœ¨ç±»é‡Œé¢&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªmainæ–¹æ³•&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºä¸­ç±»åå¿…é¡»ä¸æ–‡ä»¶åä¸€æ ·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map02</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;JAVAç¨‹åºçš„mainæ–¹æ³•ä¸­å¦‚æœåªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¯ä»¥ä¸ç”¨{}(å¤§æ‹¬å·)æ‹¬èµ·æ¥&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map03</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å˜é‡ç”±å­—æ¯ã€ä¸‹åˆ’çº¿ã€æ•°å­—ã€$ç¬¦å·éšæ„ç»„æˆï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å˜é‡ä¸èƒ½ä»¥æ•°å­—ä½œä¸ºå¼€å¤´ï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Aå’Œaåœ¨javaä¸­æ˜¯åŒä¸€ä¸ªå˜é‡ï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map03</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ä¸åŒç±»å‹çš„å˜é‡ï¼Œå¯ä»¥èµ·ç›¸åŒçš„åå­—ï¼›&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map04</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;STRING&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;x3x;&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;void&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map04</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;de$f&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>map05</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;31&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;0&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;1&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>map05</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;2&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>questionBank</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;JAVAæ‰€å®šä¹‰çš„ç‰ˆæœ¬ä¸­ä¸åŒ…æ‹¬&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map01</span><span class=p>,</span><span class=w> </span><span class=s>&#34;D&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map02</span><span class=p>,</span><span class=w> </span><span class=s>&#34;A&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;å˜é‡å‘½åè§„èŒƒè¯´æ³•æ­£ç¡®çš„æ˜¯&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map03</span><span class=p>,</span><span class=w> </span><span class=s>&#34;B&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;ä»¥ä¸‹()ä¸æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦&#34;</span><span class=p>,</span><span class=n>map04</span><span class=p>,</span><span class=w> </span><span class=s>&#34;C&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ChoiceQuestion</span><span class=p>(</span><span class=s>&#34;è¡¨è¾¾å¼(11+3*8)/4%3çš„å€¼æ˜¯&#34;</span><span class=p>,</span><span class=w> </span><span class=n>map05</span><span class=p>,</span><span class=w> </span><span class=s>&#34;D&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;å°çº¢é©¬å’Œå°é»‘é©¬ç”Ÿçš„å°é©¬å‡ æ¡è…¿&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;4æ¡è…¿&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;é“æ£’æ‰“å¤´ç–¼è¿˜æ˜¯æœ¨æ£’æ‰“å¤´ç–¼&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;å¤´æœ€ç–¼&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;ä»€ä¹ˆåºŠä¸èƒ½ç¡è§‰&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç‰™åºŠ&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>AnswerQuestion</span><span class=p>(</span><span class=s>&#34;ä¸ºä»€ä¹ˆå¥½é©¬ä¸åƒå›å¤´è‰&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;åé¢çš„è‰æ²¡äº†&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>createPaper</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>candidate</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>CloneNotSupportedException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>QuestionBank</span><span class=w> </span><span class=n>questionBankClone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>QuestionBank</span><span class=p>)</span><span class=w> </span><span class=n>questionBank</span><span class=p>.</span><span class=na>clone</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>questionBankClone</span><span class=p>.</span><span class=na>setCandidate</span><span class=p>(</span><span class=n>candidate</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>questionBankClone</span><span class=p>.</span><span class=na>setNumber</span><span class=p>(</span><span class=n>number</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>questionBankClone</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ€»ç»“-2>æ€»ç»“</h3><blockquote><p>åŸå‹æ¨¡å¼ä½¿ç”¨çš„åœºæ™¯å¹¶ä¸æ˜¯å¾ˆé«˜ã€‚</p></blockquote><ul><li>ä¼˜ç‚¹</li></ul><p>ä¾¿äºé€šè¿‡å…‹éš†æ–¹å¼åˆ›å»ºå¤æ‚å¯¹è±¡ã€ä¹Ÿå¯ä»¥é¿å…é‡å¤åšåˆå§‹åŒ–æ“ä½œã€ä¸éœ€è¦ä¸ç±»ä¸­æ‰€å±çš„å…¶ä»–ç±»è€¦åˆç­‰</p><ul><li>ç¼ºç‚¹</li></ul><p>å¦‚æœå¯¹è±¡ä¸­åŒ…æ‹¬äº†å¾ªç¯å¼•ç”¨çš„å…‹éš†ï¼Œä»¥åŠç±»ä¸­æ·±åº¦ä½¿ç”¨å¯¹è±¡çš„å…‹éš†ï¼Œéƒ½ä¼šä½¿æ­¤æ¨¡å¼å˜å¾—å¼‚å¸¸éº»çƒ¦ã€‚</p><h2 id=å»ºé€ è€…æ¨¡å¼>å»ºé€ è€…æ¨¡å¼</h2><blockquote><p>å°†å¤šä¸ªç®€å•å¯¹è±¡é€šè¿‡ä¸€æ­¥æ­¥çš„ç»„è£…æ„å»ºå‡ºä¸€ä¸ªå¤æ‚å¯¹è±¡çš„è¿‡ç¨‹ã€‚</p></blockquote><h3 id=é€šè¿‡ä»£ç æ¨¡æ‹Ÿä¸€æ¬¡è£…ä¿®>é€šè¿‡ä»£ç æ¨¡æ‹Ÿä¸€æ¬¡è£…ä¿®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>itstack-demo-design-3-00
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â””â”€â”€ main
</span></span><span class=line><span class=cl>        â””â”€â”€ java
</span></span><span class=line><span class=cl>            â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>                â”œâ”€â”€ ceilling
</span></span><span class=line><span class=cl>                â”‚   â”œâ”€â”€ LevelOneCeiling.java
</span></span><span class=line><span class=cl>                â”‚   â””â”€â”€ LevelTwoCeiling.java
</span></span><span class=line><span class=cl>                â”œâ”€â”€ coat
</span></span><span class=line><span class=cl>                â”‚   â”œâ”€â”€ DuluxCoat.java
</span></span><span class=line><span class=cl>                â”‚   â””â”€â”€ LiBangCoat.java
</span></span><span class=line><span class=cl>                â”‚   â””â”€â”€ LevelTwoCeiling.java
</span></span><span class=line><span class=cl>                â”œâ”€â”€ floor
</span></span><span class=line><span class=cl>                â”‚   â”œâ”€â”€ DerFloor.java
</span></span><span class=line><span class=cl>                â”‚   â””â”€â”€ ShengXiangFloor.java
</span></span><span class=line><span class=cl>                â”œâ”€â”€ tile
</span></span><span class=line><span class=cl>                â”‚   â”œâ”€â”€ DongPengTile.java
</span></span><span class=line><span class=cl>                â”‚   â””â”€â”€ MarcoPoloTile.java
</span></span><span class=line><span class=cl>                â””â”€â”€ Matter.java
</span></span></code></pre></td></tr></table></div></div><p>åœ¨æ¨¡æ‹Ÿå·¥ç¨‹ä¸­æä¾›äº†è£…ä¿®ä¸­æ‰€éœ€è¦çš„ç‰©æ–™ï¼›<code>ceilling(åŠé¡¶)</code>ã€<code>coat(æ¶‚æ–™)</code>ã€<code>floor(åœ°æ¿)</code>ã€<code>tile(åœ°ç –)</code>ï¼Œè¿™ä¹ˆå››é¡¹å†…å®¹ã€‚</p><ul><li>ç‰©æ–™æ¥å£</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>();</span><span class=w>      </span><span class=c1>// åœºæ™¯ï¼›åœ°æ¿ã€åœ°ç –ã€æ¶‚æ–™ã€åŠé¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>();</span><span class=w>      </span><span class=c1>// å“ç‰Œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>();</span><span class=w>      </span><span class=c1>// å‹å·</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>();</span><span class=w>  </span><span class=c1>// ä»·æ ¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>();</span><span class=w>       </span><span class=c1>// æè¿°</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æ¯ä¸ªå•ç‹¬çš„ç‰©æ–™éƒ½å…·æœ‰çš„å…¬å…±å±æ€§ï¼Œä¿è¯æ‰€æœ‰çš„è£…ä¿®ææ–™éƒ½å¯ä»¥æŒ‰ç…§ç»Ÿä¸€æ ‡å‡†è¿›è¡Œè·å–ã€‚</p><ul><li>åŠé¡¶</li></ul><p>ä¸€çº§é¡¶</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>LevelOneCeiling</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åŠé¡¶&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;è£…ä¿®å…¬å¸è‡ªå¸¦&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ä¸€çº§é¡¶&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>260</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;é€ å‹åªåšä½ä¸€çº§ï¼Œåªæœ‰ä¸€ä¸ªå±‚æ¬¡çš„åŠé¡¶ï¼Œä¸€èˆ¬ç¦»é¡¶120-150mm&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>äºŒçº§é¡¶</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>LevelTwoCeiling</span><span class=w>  </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åŠé¡¶&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;è£…ä¿®å…¬å¸è‡ªå¸¦&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;äºŒçº§é¡¶&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>850</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ä¸¤ä¸ªå±‚æ¬¡çš„åŠé¡¶ï¼ŒäºŒçº§åŠé¡¶é«˜åº¦ä¸€èˆ¬å°±å¾€ä¸‹åŠ20cmï¼Œè¦æ˜¯å±‚é«˜å¾ˆé«˜ï¼Œä¹Ÿå¯å¢åŠ æ¯çº§çš„åšåº¦&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>æ¶‚æ–™(coat)</li></ul><p><strong>å¤šä¹å£«</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DuluxCoat</span><span class=w>  </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;æ¶‚æ–™&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;å¤šä¹å£«(Dulux)&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ç¬¬äºŒä»£&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>719</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;å¤šä¹å£«æ˜¯é˜¿å…‹è‹è¯ºè´å°”æ——ä¸‹çš„è‘—åå»ºç­‘è£…é¥°æ²¹æ¼†å“ç‰Œï¼Œäº§å“ç•…é”€äºå…¨çƒ100ä¸ªå›½å®¶ï¼Œæ¯å¹´å…¨çƒæœ‰5000ä¸‡æˆ·å®¶åº­ä½¿ç”¨å¤šä¹å£«æ²¹æ¼†ã€‚&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>ç«‹é‚¦</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>LiBangCoat</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;æ¶‚æ–™&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ç«‹é‚¦&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;é»˜è®¤çº§åˆ«&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>650</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ç«‹é‚¦å§‹ç»ˆä»¥å¼€å‘ç»¿è‰²äº§å“ã€æ³¨é‡é«˜ç§‘æŠ€ã€é«˜å“è´¨ä¸ºç›®æ ‡ï¼Œä»¥æŠ€æœ¯åŠ›é‡ä¸æ–­æ¨è¿›ç§‘ç ”å’Œå¼€å‘ï¼Œæ»¡è¶³æ¶ˆè´¹è€…éœ€æ±‚ã€‚&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>2.4 åœ°æ¿(floor)</li></ul><p><strong>å¾·å°”</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DerFloor</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åœ°æ¿&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;å¾·å°”(Der)&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;A+&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>119</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;DERå¾·å°”é›†å›¢æ˜¯å…¨çƒé¢†å…ˆçš„ä¸“ä¸šæœ¨åœ°æ¿åˆ¶é€ å•†ï¼ŒåŒ—äº¬2008å¹´å¥¥è¿ä¼šå®¶è£…å’Œå…¬è£…åœ°æ¿ä¾›åº”å•†&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>åœ£è±¡</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ShengXiangFloor</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åœ°æ¿&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åœ£è±¡&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ä¸€çº§&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>318</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åœ£è±¡åœ°æ¿æ˜¯ä¸­å›½åœ°æ¿è¡Œä¸šè‘—åå“ç‰Œã€‚åœ£è±¡åœ°æ¿æ‹¥æœ‰ä¸­å›½é©°åå•†æ ‡ã€ä¸­å›½åç‰Œã€å›½å®¶å…æ£€ã€ä¸­å›½ç¯å¢ƒæ ‡å¿—è®¤è¯ç­‰å¤šé¡¹è£èª‰ã€‚&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>2.5 åœ°ç –(tile)</li></ul><p><strong>ä¸œé¹</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DongPengTile</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åœ°ç –&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ä¸œé¹ç“·ç –&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;10001&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>102</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ä¸œé¹ç“·ç –ä»¥å“è´¨é“¸å°±å“ç‰Œï¼Œç§‘æŠ€æ¨åŠ¨å“ç‰Œï¼Œå£ç¢‘ä¼ æ’­å“ç‰Œä¸ºå®—æ—¨ï¼Œ2014å¹´å“ç‰Œä»·å€¼132.35äº¿å…ƒï¼Œä½åˆ—å»ºé™¶è¡Œä¸šæ¦œé¦–ã€‚&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>é©¬å¯æ³¢ç½—</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MarcoPoloTile</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Matter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>scene</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;åœ°ç –&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>brand</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;é©¬å¯æ³¢ç½—(MARCO POLO)&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>model</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;ç¼ºçœ&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=nf>price</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>140</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>desc</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;â€œé©¬å¯æ³¢ç½—â€å“ç‰Œè¯ç”Ÿäº1996å¹´ï¼Œä½œä¸ºå›½å†…æœ€æ—©å“ç‰ŒåŒ–çš„å»ºé™¶å“ç‰Œï¼Œä»¥â€œæ–‡åŒ–é™¶ç“·â€å é¢†å¸‚åœºï¼Œäº«æœ‰â€œä»¿å¤ç –è‡³å°Šâ€çš„ç¾èª‰ã€‚&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=bad-1>bad</h3><blockquote><p>ä½¿ç”¨if-elseæ¥å®ç°</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>itstack-demo-design-3-01
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â””â”€â”€ main
</span></span><span class=line><span class=cl>        â””â”€â”€ java
</span></span><span class=line><span class=cl>            â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>                â””â”€â”€ DecorationPackageController.java
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DecorationPackageController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getMatterList</span><span class=p>(</span><span class=n>BigDecimal</span><span class=w> </span><span class=n>area</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>level</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Matter</span><span class=o>&gt;</span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Matter</span><span class=o>&gt;</span><span class=p>();</span><span class=w> </span><span class=c1>// è£…ä¿®æ¸…å•</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>.</span><span class=na>ZERO</span><span class=p>;</span><span class=w>          </span><span class=c1>// è£…ä¿®ä»·æ ¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è±ªåæ¬§å¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>level</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>LevelTwoCeiling</span><span class=w> </span><span class=n>levelTwoCeiling</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LevelTwoCeiling</span><span class=p>();</span><span class=w> </span><span class=c1>// åŠé¡¶ï¼ŒäºŒçº§é¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>DuluxCoat</span><span class=w> </span><span class=n>duluxCoat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DuluxCoat</span><span class=p>();</span><span class=w>                   </span><span class=c1>// æ¶‚æ–™ï¼Œå¤šä¹å£«</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ShengXiangFloor</span><span class=w> </span><span class=n>shengXiangFloor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ShengXiangFloor</span><span class=p>();</span><span class=w> </span><span class=c1>// åœ°æ¿ï¼Œåœ£è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>levelTwoCeiling</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>duluxCoat</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>shengXiangFloor</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;0.2&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>levelTwoCeiling</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;1.4&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>duluxCoat</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=n>shengXiangFloor</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è½»å¥¢ç”°å›­</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>level</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>LevelTwoCeiling</span><span class=w> </span><span class=n>levelTwoCeiling</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LevelTwoCeiling</span><span class=p>();</span><span class=w> </span><span class=c1>// åŠé¡¶ï¼ŒäºŒçº§é¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>LiBangCoat</span><span class=w> </span><span class=n>liBangCoat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LiBangCoat</span><span class=p>();</span><span class=w>                </span><span class=c1>// æ¶‚æ–™ï¼Œç«‹é‚¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>MarcoPoloTile</span><span class=w> </span><span class=n>marcoPoloTile</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>MarcoPoloTile</span><span class=p>();</span><span class=w>       </span><span class=c1>// åœ°ç –ï¼Œé©¬å¯æ³¢ç½—</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>levelTwoCeiling</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>liBangCoat</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>marcoPoloTile</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;0.2&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>levelTwoCeiling</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;1.4&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>liBangCoat</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=n>marcoPoloTile</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ç°ä»£ç®€çº¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>3</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>level</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>LevelOneCeiling</span><span class=w> </span><span class=n>levelOneCeiling</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LevelOneCeiling</span><span class=p>();</span><span class=w>  </span><span class=c1>// åŠé¡¶ï¼ŒäºŒçº§é¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>LiBangCoat</span><span class=w> </span><span class=n>liBangCoat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LiBangCoat</span><span class=p>();</span><span class=w>                 </span><span class=c1>// æ¶‚æ–™ï¼Œç«‹é‚¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>DongPengTile</span><span class=w> </span><span class=n>dongPengTile</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DongPengTile</span><span class=p>();</span><span class=w>           </span><span class=c1>// åœ°ç –ï¼Œä¸œé¹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>levelOneCeiling</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>liBangCoat</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>dongPengTile</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;0.2&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>levelOneCeiling</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;1.4&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>liBangCoat</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=n>dongPengTile</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>StringBuilder</span><span class=w> </span><span class=n>detail</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>(</span><span class=s>&#34;\r\n-------------------------------------------------------\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;è£…ä¿®æ¸…å•&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;å¥—é¤ç­‰çº§ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>level</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;å¥—é¤ä»·æ ¼ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>setScale</span><span class=p>(</span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>.</span><span class=na>ROUND_HALF_UP</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; å…ƒ\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;æˆ¿å±‹é¢ç§¯ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>area</span><span class=p>.</span><span class=na>doubleValue</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; å¹³ç±³\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;ææ–™æ¸…å•ï¼š\r\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>:</span><span class=w> </span><span class=n>list</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>scene</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>brand</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ã€&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>model</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ã€å¹³ç±³ä»·æ ¼ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>price</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34; å…ƒã€‚\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>detail</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=good-1>good</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>itstack-demo-design-3-02
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â”œâ”€â”€ main
</span></span><span class=line><span class=cl>    â”‚   â””â”€â”€ java
</span></span><span class=line><span class=cl>    â”‚       â””â”€â”€ org.itstack.demo.design
</span></span><span class=line><span class=cl>    â”‚           â”œâ”€â”€ Builder.java    
</span></span><span class=line><span class=cl>    â”‚           â”œâ”€â”€ DecorationPackageMenu.java
</span></span><span class=line><span class=cl>    â”‚           â””â”€â”€ IMenu.java 
</span></span><span class=line><span class=cl>    â””â”€â”€ test
</span></span><span class=line><span class=cl>         â””â”€â”€ java
</span></span><span class=line><span class=cl>             â””â”€â”€ org.itstack.demo.design.test
</span></span><span class=line><span class=cl>                 â””â”€â”€ ApiTest.java
</span></span></code></pre></td></tr></table></div></div><p><img src=https://fastly.jsdelivr.net/gh/thecoolboyhan/th_blogs@main/image/2025-07/1753342260336_1753342260357.png loading=lazy alt=1753342260336.png></p><ul><li>è£…ä¿®åŒ…æ¥å£</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>IMenu</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendCeiling</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>);</span><span class=w> </span><span class=c1>// åŠé¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendCoat</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>);</span><span class=w>    </span><span class=c1>// æ¶‚æ–™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendFloor</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>);</span><span class=w>   </span><span class=c1>// åœ°æ¿</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendTile</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>);</span><span class=w>    </span><span class=c1>// åœ°ç –</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>getDetail</span><span class=p>();</span><span class=w>                 </span><span class=c1>// æ˜ç»† </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>è£…ä¿®åŒ…å®ç°</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DecorationPackageMenu</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Matter</span><span class=o>&gt;</span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Matter</span><span class=o>&gt;</span><span class=p>();</span><span class=w>  </span><span class=c1>// è£…ä¿®æ¸…å•</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>.</span><span class=na>ZERO</span><span class=p>;</span><span class=w>      </span><span class=c1>// è£…ä¿®ä»·æ ¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>area</span><span class=p>;</span><span class=w>  </span><span class=c1>// é¢ç§¯</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>grade</span><span class=p>;</span><span class=w>     </span><span class=c1>// è£…ä¿®ç­‰çº§ï¼›è±ªåæ¬§å¼ã€è½»å¥¢ç”°å›­ã€ç°ä»£ç®€çº¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>DecorationPackageMenu</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>DecorationPackageMenu</span><span class=p>(</span><span class=n>Double</span><span class=w> </span><span class=n>area</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>grade</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>area</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=n>area</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>grade</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grade</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendCeiling</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>matter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;0.2&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendCoat</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>matter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>(</span><span class=s>&#34;1.4&#34;</span><span class=p>)).</span><span class=na>multiply</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendFloor</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>matter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=nf>appendTile</span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>matter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>area</span><span class=p>.</span><span class=na>multiply</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>price</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getDetail</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>StringBuilder</span><span class=w> </span><span class=n>detail</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>(</span><span class=s>&#34;\r\n-------------------------------------------------------\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;è£…ä¿®æ¸…å•&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;å¥—é¤ç­‰çº§ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>grade</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;å¥—é¤ä»·æ ¼ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>price</span><span class=p>.</span><span class=na>setScale</span><span class=p>(</span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=p>.</span><span class=na>ROUND_HALF_UP</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; å…ƒ\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;æˆ¿å±‹é¢ç§¯ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>area</span><span class=p>.</span><span class=na>doubleValue</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; å¹³ç±³\r\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=s>&#34;ææ–™æ¸…å•ï¼š\r\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>Matter</span><span class=w> </span><span class=n>matter</span><span class=p>:</span><span class=w> </span><span class=n>list</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>detail</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>scene</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>brand</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ã€&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>model</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;ã€å¹³ç±³ä»·æ ¼ï¼š&#34;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>matter</span><span class=p>.</span><span class=na>price</span><span class=p>()).</span><span class=na>append</span><span class=p>(</span><span class=s>&#34; å…ƒã€‚\n&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>detail</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>è°ƒç”¨æ–¹æ³•</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Builder</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=nf>levelOne</span><span class=p>(</span><span class=n>Double</span><span class=w> </span><span class=n>area</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DecorationPackageMenu</span><span class=p>(</span><span class=n>area</span><span class=p>,</span><span class=w> </span><span class=s>&#34;è±ªåæ¬§å¼&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendCeiling</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>LevelTwoCeiling</span><span class=p>())</span><span class=w>    </span><span class=c1>// åŠé¡¶ï¼ŒäºŒçº§é¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendCoat</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>DuluxCoat</span><span class=p>())</span><span class=w>             </span><span class=c1>// æ¶‚æ–™ï¼Œå¤šä¹å£«</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendFloor</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>ShengXiangFloor</span><span class=p>());</span><span class=w>     </span><span class=c1>// åœ°æ¿ï¼Œåœ£è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=nf>levelTwo</span><span class=p>(</span><span class=n>Double</span><span class=w> </span><span class=n>area</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DecorationPackageMenu</span><span class=p>(</span><span class=n>area</span><span class=p>,</span><span class=w> </span><span class=s>&#34;è½»å¥¢ç”°å›­&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendCeiling</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>LevelTwoCeiling</span><span class=p>())</span><span class=w>   </span><span class=c1>// åŠé¡¶ï¼ŒäºŒçº§é¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendCoat</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>LiBangCoat</span><span class=p>())</span><span class=w>           </span><span class=c1>// æ¶‚æ–™ï¼Œç«‹é‚¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendTile</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>MarcoPoloTile</span><span class=p>());</span><span class=w>       </span><span class=c1>// åœ°ç –ï¼Œé©¬å¯æ³¢ç½—</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>IMenu</span><span class=w> </span><span class=nf>levelThree</span><span class=p>(</span><span class=n>Double</span><span class=w> </span><span class=n>area</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DecorationPackageMenu</span><span class=p>(</span><span class=n>area</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç°ä»£ç®€çº¦&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendCeiling</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>LevelOneCeiling</span><span class=p>())</span><span class=w>   </span><span class=c1>// åŠé¡¶ï¼ŒäºŒçº§é¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendCoat</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>LiBangCoat</span><span class=p>())</span><span class=w>           </span><span class=c1>// æ¶‚æ–™ï¼Œç«‹é‚¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>appendTile</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>DongPengTile</span><span class=p>());</span><span class=w>        </span><span class=c1>// åœ°ç –ï¼Œä¸œé¹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ€»ç»“-3>æ€»ç»“</h3><ul><li>ä»€ä¹ˆæ—¶å€™é€‚åˆå»ºé€ è€…æ¨¡å¼ï¼Ÿ</li></ul><p>ä¸€äº›åŸºæœ¬ç‰©æ–™ä¸ä¼šå˜ï¼Œè€Œå…¶ç»„åˆç»å¸¸å˜åŒ–çš„æ—¶å€™ã€‚</p><ul><li>æ­¤è®¾è®¡æ¨¡å¼æ»¡è¶³äº†å•ä¸€èŒè´£åŸåˆ™ä»¥åŠå¯å¤ç”¨çš„æŠ€æœ¯ã€å»ºé€ è€…ç‹¬ç«‹ã€æ˜“æ‰©å±•ã€ä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ã€‚ä½†åŒæ—¶å½“å‡ºç°ç‰¹åˆ«å¤šçš„ç‰©æ–™ä»¥åŠå¾ˆå¤šçš„ç»„åˆåï¼Œç±»çš„ä¸æ–­æ‰©å±•ä¹Ÿä¼šé€ æˆéš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ã€‚ä½†è¿™ç§è®¾è®¡ç»“æ„æ¨¡å‹å¯ä»¥æŠŠé‡å¤çš„å†…å®¹æŠ½è±¡åˆ°æ•°æ®åº“ä¸­ï¼ŒæŒ‰ç…§éœ€è¦é…ç½®ã€‚è¿™æ ·å°±å¯ä»¥å‡å°‘ä»£ç ä¸­å¤§é‡çš„é‡å¤ã€‚</li></ul><blockquote><p>ä¸‹é¢æ˜¯å°åšå“¥çš„åŸè¯ï¼Œå¤ªé‡‘å…¸äº†</p></blockquote><ul><li>è®¾è®¡æ¨¡å¼èƒ½å¸¦ç»™ä½ çš„æ˜¯ä¸€äº›æ€æƒ³ï¼Œä½†åœ¨å¹³æ—¶çš„å¼€å‘ä¸­æ€ä¹ˆæ ·æ¸…æ™°çš„æç‚¼å‡ºç¬¦åˆæ­¤æ€è·¯çš„å»ºé€ æ¨¡å—ï¼Œæ˜¯æ¯”è¾ƒéš¾çš„ã€‚éœ€è¦ç»è¿‡ä¸€äº›é”»ç‚¼å’Œä¸æ–­æ‰¿æ¥æ›´å¤šçš„é¡¹ç›®ï¼Œä»è€Œè·å¾—è¿™éƒ¨åˆ†ç»éªŒã€‚æœ‰çš„æ—¶å€™ä½ çš„ä»£ç å†™çš„å¥½ï¼Œå¾€å¾€æ˜¯å€’é€¼çš„ï¼Œå¤æ‚çš„ä¸šåŠ¡é¢‘ç¹çš„å˜åŒ–ï¼Œä¸æ–­çš„æŒ‘æˆ˜ï¼</li></ul><h2 id=å•ä¾‹æ¨¡å¼>å•ä¾‹æ¨¡å¼</h2><blockquote><p>åˆ›å»ºå‹è®¾è®¡æ¨¡å¼</p><p>é¿å…ä¸€ä¸ªå…¨å±€ä½¿ç”¨çš„ç±»é¢‘ç¹çš„åˆ›å»ºå’Œæ¶ˆè´¹ï¼Œä»è€Œæå‡æ•´ä½“ä»£ç çš„æ€§èƒ½ã€‚</p></blockquote><p>ä¸ƒç§ä¸åŒçš„å•ä¾‹æ¨¡å¼</p><h3 id=0é™æ€ç±»éå•ä¾‹æ¨¡å¼>0ã€é™æ€ç±»ï¼ˆéå•ä¾‹æ¨¡å¼ï¼‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Singleton_00</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>cache</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentHashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ä¸éœ€è¦ç»´æŒçŠ¶æ€ï¼Œä»…è®©å…¨å±€è®¿é—®ï¼Œé™æ€ç±»çš„æ–¹å¼æ›´åŠ ç®€å•ã€‚</p><p>ä½†å¦‚æœéœ€è¦è¢«ç»§æ‰¿ä»¥åŠéœ€è¦ç»´æŒçŠ¶æ€æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°å•ä¾‹æ¨¡å¼</p><h3 id=æ‡’æ±‰æ¨¡å¼çº¿ç¨‹ä¸å®‰å…¨>æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Singleton_01</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_01</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>Singleton_01</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_01</span><span class=w> </span><span class=nf>getInstance</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=kc>null</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>instance</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Singleton_01</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>ä½¿æ„é€ å‡½æ•°ä¸ºprivateï¼Œä¸å…è®¸ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œåªèƒ½é€šè¿‡getInstanceæ¥åˆ›å»º</p></blockquote><p>æ‡’åŠ è½½ï¼Œåªæœ‰åœ¨éœ€è¦ä½¿ç”¨æ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡ã€‚</p><ul><li>ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ</li></ul><p>å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨getInstanceæ—¶ï¼Œå¯èƒ½å¾—åˆ°å¤šä¸ªä¸åŒçš„å¯¹è±¡ã€‚</p><h3 id=æ‡’æ±‰æ¨¡å¼çº¿ç¨‹å®‰å…¨>æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Singleton_02</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_02</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>Singleton_02</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>synchronized</span><span class=w> </span><span class=n>Singleton_02</span><span class=w> </span><span class=nf>getInstance</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=kc>null</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>instance</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Singleton_02</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åˆ©ç”¨synchronizedä¿è¯åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥åˆ›å»ºå¯¹è±¡</p><ul><li>å­˜åœ¨é—®é¢˜</li></ul><p>æ‰€æœ‰çº¿ç¨‹åœ¨è·å–æ­¤å•ä¾‹ç±»æ—¶ï¼Œéƒ½ä¼šè¢«synchronizedé”å®šï¼Œå¯¼è‡´èµ„æºæµªè´¹ã€‚</p><h3 id=é¥¿æ±‰æ¨¡å¼çº¿ç¨‹å®‰å…¨>é¥¿æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Singleton_03</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_03</span><span class=w> </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Singleton_03</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>Singleton_03</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_03</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ç±»ä¼¼äºæœ€å¼€å§‹çš„é™æ€ç±»ï¼Œå½“ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ç›´æ¥è¿è¡ŒåŠ è½½ï¼Œæ— è®ºæ˜¯å¦ä½¿ç”¨ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡ã€‚</p><ul><li>ä¸ºä»€ä¹ˆçº¿ç¨‹å®‰å…¨ï¼Ÿ</li></ul><p>JVMåœ¨ç±»åŠ è½½çš„è¿‡ç¨‹ä¸­
<strong>åŠ è½½</strong>&ndash;><strong>éªŒè¯</strong>&ndash;><strong>å‡†å¤‡</strong>&ndash;><strong>è§£æ</strong>&ndash;><font color=red><strong>åˆå§‹åŒ–</strong></font>&ndash;><strong>ä½¿ç”¨</strong>&ndash;><strong>å¸è½½</strong></p><p>åœ¨åˆå§‹åŒ–é˜¶æ®µå°±ç›´æ¥æ‰§è¡Œé™æ€ä»£ç å—ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡ã€‚åç»­å…¶ä»–ç±»ä½¿ç”¨æ—¶å°±æ˜¯å·²ç»åˆ›å»ºå¥½çš„å¯¹è±¡ã€‚</p><ul><li>å­˜åœ¨çš„é—®é¢˜</li></ul><p>ç¨‹åºå¯åŠ¨ï¼Œæ‰€æœ‰çš„å•ä¾‹ç±»å…¨éƒ¨è¢«åˆ›å»ºï¼Œå¦‚æœå•ä¾‹ç±»ç‰¹åˆ«å¤šï¼Œä¼šå¯¼è‡´å¤§é‡çš„èµ„æºå ç”¨ã€‚</p><h3 id=ç±»çš„å†…éƒ¨ç±»çº¿ç¨‹å®‰å…¨>ç±»çš„å†…éƒ¨ç±»ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Singleton_04</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>class</span> <span class=nc>SingletonHolder</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_04</span><span class=w> </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Singleton_04</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>Singleton_04</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_04</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>SingletonHolder</span><span class=p>.</span><span class=na>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨é™æ€å†…éƒ¨ç±»ï¼Œå³ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿä¿è¯äº†æ‡’åŠ è½½ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰é”æ¥æ¶ˆè€—æ€§èƒ½ã€‚</p><ul><li>å¦‚ä½•è¢«åˆ›å»º</li></ul><p>åˆå§‹æ—¶ï¼Œå¹¶æ²¡æœ‰åˆ›å»ºinstanceæ­¤å†…éƒ¨ç±»ã€‚</p><p>å½“æœ‰çº¿ç¨‹è°ƒç”¨getInstanceæ–¹æ³•æ—¶ï¼Œä¼šè¿”å›SingletonHolder.instanceå¯¹è±¡ã€‚</p><p>æœ‰æ ˆï¼ˆçº¿ç¨‹ï¼‰éœ€è¦åŠ è½½SingletonHolder.instanceå¯¹è±¡ï¼ŒJVMç¬¬ä¸€æ¬¡æŠŠæŒ‡å‘classçš„ç¬¦å·å¼•ç”¨æ”¹æˆæ­£å¸¸åŠ è½½åˆ°JVMå•ä¾‹æ± ä¸­çš„ç›´æ¥å¼•ç”¨ã€‚ï¼ˆæ­¤æ—¶ç›¸å½“äºè§¦å‘äº†ç±»çš„é¥¿æ±‰å¼å•ä¾‹ï¼‰</p><ul><li>ä¸ºä»€ä¹ˆçº¿ç¨‹å®‰å…¨ï¼Ÿ</li></ul><blockquote><p>ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºã€‹ä¸­çš„åŸè¯ï¼š</p></blockquote><p>è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åœ°åŠ é”ã€åŒæ­¥ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªç±»çš„()æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ()æ–¹æ³•å®Œæ¯•ã€‚å¦‚æœåœ¨ä¸€ä¸ªç±»çš„()æ–¹æ³•ä¸­æœ‰è€—æ—¶å¾ˆé•¿çš„æ“ä½œï¼Œå°±å¯èƒ½é€ æˆå¤šä¸ªè¿›ç¨‹é˜»å¡(éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä»–çº¿ç¨‹è™½ç„¶ä¼šè¢«é˜»å¡ï¼Œä½†å¦‚æœæ‰§è¡Œ()æ–¹æ³•åï¼Œå…¶ä»–çº¿ç¨‹å”¤é†’ä¹‹åä¸ä¼šå†æ¬¡è¿›å…¥()æ–¹æ³•ã€‚åŒä¸€ä¸ªåŠ è½½å™¨ä¸‹ï¼Œä¸€ä¸ªç±»å‹åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚)ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™ç§é˜»å¡å¾€å¾€æ˜¯å¾ˆéšè”½çš„ã€‚</p><ul><li>å­˜åœ¨çš„é—®é¢˜</li></ul><p>æ™®é€šä½¿ç”¨æ˜¯éå¸¸æ¨èçš„ã€‚ä½†æ˜¯ç”±äºä½¿ç”¨äº†é™æ€å†…éƒ¨ç±»ï¼Œæ— æ³•ä»å¤–éƒ¨ç›´æ¥ä¼ é€’å‚æ•°è¿›å»</p><h3 id=åŒé‡é”æ ¡éªŒçº¿ç¨‹å®‰å…¨dcl>åŒé‡é”æ ¡éªŒï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰DCL</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Singleton_05</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>volatile</span><span class=w> </span><span class=n>Singleton_05</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>Singleton_05</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Singleton_05</span><span class=w> </span><span class=nf>getInstance</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>if</span><span class=p>(</span><span class=kc>null</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>instance</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=kd>synchronized</span><span class=w> </span><span class=p>(</span><span class=n>Singleton_05</span><span class=p>.</span><span class=na>class</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=kc>null</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>instance</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Singleton_05</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æ»¡è¶³æ‡’åŠ è½½ï¼Œä¼šåœ¨åˆå§‹åŒ–é˜¶æ®µä¸Šé”ï¼Œåç»­æ“ä½œæ— é”ã€‚</p><h3 id=caså•ä¾‹çº¿ç¨‹å®‰å…¨>CASå•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Singleton_06</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>AtomicReference</span><span class=o>&lt;</span><span class=n>Singleton_06</span><span class=o>&gt;</span><span class=w> </span><span class=n>INSTANCE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AtomicReference</span><span class=o>&lt;</span><span class=n>Singleton_06</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>Singleton_06</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Singleton_06</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(;</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Singleton_06</span><span class=w> </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>INSTANCE</span><span class=p>.</span><span class=na>get</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=kc>null</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>instance</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>INSTANCE</span><span class=p>.</span><span class=na>compareAndSet</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Singleton_06</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>INSTANCE</span><span class=p>.</span><span class=na>get</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>Singleton_06</span><span class=p>.</span><span class=na>getInstance</span><span class=p>());</span><span class=w> </span><span class=c1>// org.itstack.demo.design.Singleton_06@2b193f2d</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>Singleton_06</span><span class=p>.</span><span class=na>getInstance</span><span class=p>());</span><span class=w> </span><span class=c1>// org.itstack.demo.design.Singleton_06@2b193f2d</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>é€šè¿‡é‡Œç”¨åŸå­ç±»ä¸­çš„CASæ“ä½œï¼Œå®ç°CASåˆ›å»ºå¯¹è±¡</p><ul><li>å­˜åœ¨çš„é—®é¢˜</li></ul><p>CASæ˜¯ä¸€ä¸ªå¿™ç­‰æ“ä½œï¼Œä¼šä¸€ç›´å¾ªç¯å°è¯•ï¼Œç›´åˆ°æˆåŠŸã€‚ä½†å¦‚æœå¯¹è±¡åˆ›å»ºä¸€ç›´å¤±è´¥ï¼Œå°±ä¼šæ— é™é‡è¯•ã€‚</p><h3 id=effective-javaä½œè€…æ¨èçš„æšä¸¾å•ä¾‹çº¿ç¨‹å®‰å…¨>Effective Javaä½œè€…æ¨èçš„æšä¸¾å•ä¾‹(çº¿ç¨‹å®‰å…¨)</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>enum</span><span class=w> </span><span class=n>Singleton_07</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>INSTANCE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>test</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;hi~&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åˆ©ç”¨æšä¸¾ç±»åˆ›å»ºçš„å•ä¾‹å¯¹è±¡ï¼Œå³ä½¿ç”¨è¿‡åå°„ä¸šåŠ¡åˆ›å»ºç›¸åŒçš„å¯¹è±¡ã€‚</p><p><em>å¿åœ°æä¾›äº†ä¸²è¡ŒåŒ–æœºåˆ¶ï¼Œç»å¯¹é˜²æ­¢å¯¹æ­¤å®ä¾‹åŒ–ï¼Œå³ä½¿æ˜¯åœ¨é¢å¯¹å¤æ‚çš„ä¸²è¡ŒåŒ–æˆ–è€…åå°„æ”»å‡»çš„æ—¶å€™ã€‚</em></p><h2 id=é€‚é…å™¨æ¨¡å¼>é€‚é…å™¨æ¨¡å¼</h2><blockquote><p>ç»“æ„å‹æ¨¡å¼</p><p>æŠŠåŸæœ¬ä¸å…¼å®¹çš„æ¥å£ï¼Œé€šè¿‡é€‚é…å™¨ä¿®æ”¹åšåˆ°ç»Ÿä¸€ã€‚ä½¿å¾—ç”¨æˆ·æ–¹ä¾¿ä½¿ç”¨ã€‚</p></blockquote><p><img src=https://camo.githubusercontent.com/b83fc564cdb39695fd7527f0642bc8124749b9c8c32b1a093b41d4c0f88e775e/68747470733a2f2f627567737461636b2e636e2f6173736574732f696d616765732f323032302f6974737461636b2d64656d6f2d64657369676e2d362d30332e706e67 loading=lazy alt=åœºæ™¯æ¨¡æ‹Ÿï¼›æ¥æ”¶å¤šç±»å‹MQæ¶ˆæ¯></p><p>å¤šç§å·®å¼‚åŒ–ç±»å‹çš„æ¥å£åšç»Ÿä¸€è¾“å‡ºã€‚</p><p><img src=https://camo.githubusercontent.com/8f0b35f2d77e5a64ae144303b79b4b519c0bfee796675b836bb558f2750463f3/68747470733a2f2f627567737461636b2e636e2f6173736574732f696d616765732f323032302f6974737461636b2d64656d6f2d64657369676e2d362d30342e706e67 loading=lazy alt=é€‚é…å™¨æ¨¡å‹ç»“æ„></p><p>ä½¿ç”¨é€‚é…å™¨æ¨¡å¼å°±å¯ä»¥è®©ä»£ç ï¼Œå¹²å‡€æ•´æ´æ˜“äºç»´æŠ¤ã€å‡å°‘å¤§é‡çš„é‡å¤åˆ¤æ–­ï¼Œè®©ä»£ç æ›´åŠ æ˜“äºç»´æŠ¤å’Œæ‹“å±•ã€‚</p><blockquote><p>ç»Ÿä¸€é€‚é…å™¨æ¥å£</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>OrderAdapterService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>boolean</span><span class=w> </span><span class=nf>isFirst</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>ä¸åŒçš„ä¸¤ç§å®ç°</p></blockquote><p><strong>å†…éƒ¨å•†å“æ¥å£</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>InsideOrderService</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>OrderAdapterService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>OrderService</span><span class=w> </span><span class=n>orderService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>OrderService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>isFirst</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>orderService</span><span class=p>.</span><span class=na>queryUserOrderCount</span><span class=p>(</span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>ç¬¬ä¸‰æ–¹å•†å“æ¥å£</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public class POPOrderAdapterServiceImpl implements OrderAdapterService {
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    private POPOrderService popOrderService = new POPOrderService();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    public boolean isFirst(String uId) {
</span></span><span class=line><span class=cl>        return popOrderService.isFirstOrder(uId);
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸¤ä¸ªæ¥å£ä¸­éƒ½å®ç°äº†å„è‡ªçš„åˆ¤æ–­æ–¹å¼ï¼Œå°¤å…¶åƒæ˜¯æä¾›è®¢å•æ•°é‡çš„æ¥å£ï¼Œéœ€è¦è‡ªå·±åˆ¤æ–­å½“å‰æ¥åˆ°mqæ—¶è®¢å•æ•°é‡æ˜¯å¦<code>&lt;= 1</code>ï¼Œä»¥æ­¤åˆ¤æ–­æ˜¯å¦ä¸ºé¦–å•ã€‚</p><blockquote><p>æµ‹è¯•ç±»</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>test_itfAdapter</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>OrderAdapterService</span><span class=w> </span><span class=n>popOrderAdapterService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>POPOrderAdapterServiceImpl</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;åˆ¤æ–­é¦–å•ï¼Œæ¥å£é€‚é…(POP)ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>popOrderAdapterService</span><span class=p>.</span><span class=na>isFirst</span><span class=p>(</span><span class=s>&#34;100001&#34;</span><span class=p>));</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>OrderAdapterService</span><span class=w> </span><span class=n>insideOrderService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>InsideOrderService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;åˆ¤æ–­é¦–å•ï¼Œæ¥å£é€‚é…(è‡ªè¥)ï¼š&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>insideOrderService</span><span class=p>.</span><span class=na>isFirst</span><span class=p>(</span><span class=s>&#34;100001&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=æ¡¥æ¥æ¨¡å¼>æ¡¥æ¥æ¨¡å¼</h2><blockquote><p>é€šè¿‡å°†æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†åˆ†ç¦»ï¼ŒæŠŠå¤šç§å¯ä»¥åŒ¹é…çš„ä½¿ç”¨è¿›è¡Œç»„åˆã€‚</p><p>åœ¨Aç±»ä¸­å«æœ‰Bç±»çš„æ¥å£ï¼Œé€šè¿‡æ„é€ å‡½æ•°ä¼ é€’Bç±»çš„å®ç°ã€‚</p></blockquote><p><img src=https://camo.githubusercontent.com/1ce215061a2a6f355e046365659815e1126a172c3dfce827edee3ee3b9055945/68747470733a2f2f627567737461636b2e636e2f6173736574732f696d616765732f323032302f6974737461636b2d64656d6f2d64657369676e2d372d30322e706e67 loading=lazy alt=åœºæ™¯æ¨¡æ‹Ÿï¼šå¤šç§æ”¯ä»˜å’Œæ¨¡å¼></p><h3 id=å®ç°æ”¯ä»˜å’Œæ”¯ä»˜æ¨¡å¼çš„æ¨¡å¼åä¾‹>å®ç°æ”¯ä»˜å’Œæ”¯ä»˜æ¨¡å¼çš„æ¨¡å¼(åä¾‹)</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>PayController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>PayController</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>doPay</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>amount</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>channelType</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>modeType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// å¾®ä¿¡æ”¯ä»˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>channelType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿå¾®ä¿¡æ¸ é“æ”¯ä»˜åˆ’è´¦å¼€å§‹ã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>modeType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;å¯†ç æ”¯ä»˜ï¼Œé£æ§æ ¡éªŒç¯å¢ƒå®‰å…¨&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>modeType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;äººè„¸æ”¯ä»˜ï¼Œé£æ§æ ¡éªŒè„¸éƒ¨è¯†åˆ«&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>3</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>modeType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æŒ‡çº¹æ”¯ä»˜ï¼Œé£æ§æ ¡éªŒæŒ‡çº¹ä¿¡æ¯&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æ”¯ä»˜å®æ”¯ä»˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>channelType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿæ”¯ä»˜å®æ¸ é“æ”¯ä»˜åˆ’è´¦å¼€å§‹ã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>modeType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;å¯†ç æ”¯ä»˜ï¼Œé£æ§æ ¡éªŒç¯å¢ƒå®‰å…¨&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>modeType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;äººè„¸æ”¯ä»˜ï¼Œé£æ§æ ¡éªŒè„¸éƒ¨è¯†åˆ«&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>3</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>modeType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æŒ‡çº¹æ”¯ä»˜ï¼Œé£æ§æ ¡éªŒæŒ‡çº¹ä¿¡æ¯&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=ä½¿ç”¨æ¡¥æ¥æ¨¡å¼é‡æ„ä»£ç >ä½¿ç”¨æ¡¥æ¥æ¨¡å¼é‡æ„ä»£ç </h3><blockquote><p>æŠŠæ”¯ä»˜æ–¹å¼å’Œæ”¯ä»˜æ¨¡å¼è¿›è¡Œåˆ†ç¦»ï¼Œé€šè¿‡æŠ½è±¡ç±»ä¾èµ–å®ç°ç±»çš„æ–¹å¼è¿›è¡Œæ¡¥æ¥</p></blockquote><p><img src=https://camo.githubusercontent.com/d38f1c25228b7adf4c647869f782d43c1758b5a6141457f3bdd545d816dba26f/68747470733a2f2f627567737461636b2e636e2f6173736574732f696d616765732f323032302f6974737461636b2d64656d6f2d64657369676e2d372d30332e706e67 loading=lazy alt=æ¡¥æ¥æ¨¡å¼æ¨¡å‹ç»“æ„></p><ul><li>æ”¯ä»˜ç±»å‹æ¡¥æ¥æŠ½è±¡ç±»</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=kd>class</span> <span class=nc>Pay</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>Pay</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=n>IPayMode</span><span class=w> </span><span class=n>payMode</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>Pay</span><span class=p>(</span><span class=n>IPayMode</span><span class=w> </span><span class=n>payMode</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>payMode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>payMode</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>transfer</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å¾®ä¿¡æ”¯ä»˜</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>WxPay</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Pay</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>WxPay</span><span class=p>(</span><span class=n>IPayMode</span><span class=w> </span><span class=n>payMode</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>super</span><span class=p>(</span><span class=n>payMode</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>transfer</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>amount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿå¾®ä¿¡æ¸ é“æ”¯ä»˜åˆ’è´¦å¼€å§‹ã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>boolean</span><span class=w> </span><span class=n>security</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>payMode</span><span class=p>.</span><span class=na>security</span><span class=p>(</span><span class=n>uId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿå¾®ä¿¡æ¸ é“æ”¯ä»˜é£æ§æ ¡éªŒã€‚uIdï¼š{} tradeIdï¼š{} securityï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>security</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>security</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿå¾®ä¿¡æ¸ é“æ”¯ä»˜åˆ’è´¦æ‹¦æˆªã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=s>&#34;0001&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿå¾®ä¿¡æ¸ é“æ”¯ä»˜åˆ’è´¦æˆåŠŸã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;0000&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>æ”¯ä»˜å®æ”¯ä»˜</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ZfbPay</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Pay</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ZfbPay</span><span class=p>(</span><span class=n>IPayMode</span><span class=w> </span><span class=n>payMode</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>super</span><span class=p>(</span><span class=n>payMode</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>transfer</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>amount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿæ”¯ä»˜å®æ¸ é“æ”¯ä»˜åˆ’è´¦å¼€å§‹ã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>boolean</span><span class=w> </span><span class=n>security</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>payMode</span><span class=p>.</span><span class=na>security</span><span class=p>(</span><span class=n>uId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿæ”¯ä»˜å®æ¸ é“æ”¯ä»˜é£æ§æ ¡éªŒã€‚uIdï¼š{} tradeIdï¼š{} securityï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>security</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>security</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿæ”¯ä»˜å®æ¸ é“æ”¯ä»˜åˆ’è´¦æ‹¦æˆªã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=s>&#34;0001&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;æ¨¡æ‹Ÿæ”¯ä»˜å®æ¸ é“æ”¯ä»˜åˆ’è´¦æˆåŠŸã€‚uIdï¼š{} tradeIdï¼š{} amountï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>uId</span><span class=p>,</span><span class=w> </span><span class=n>tradeId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;0000&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>æ”¯ä»˜æ–¹å¼æ¥å£</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>IPayMode</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>boolean</span><span class=w> </span><span class=nf>security</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>PayFaceMode</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>IPayMode</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>PayCypher</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>security</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>uId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;äººè„¸æ”¯ä»˜ï¼Œé£æ§æ ¡éªŒè„¸éƒ¨è¯†åˆ«&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æŒ‡ä¸¾ä¾‹ä¸€ä¸ªï¼Œå…¶ä»–å¤§å·®ä¸å·®</p><blockquote><p>æ¡¥æ¥æ¨¡å¼æ»¡è¶³å•ä¸€èŒè´£å’Œå¼€é—­åŸåˆ™ï¼Œè®©æ¯ä¸€éƒ¨åˆ†çš„å†…å®¹éƒ½å¾ˆæ¸…æ™°æ˜“äºç»´æŠ¤å’Œæ‹“å±•ã€‚</p></blockquote><h2 id=ç»„åˆæ¨¡å¼>ç»„åˆæ¨¡å¼</h2><blockquote><p>é€šè¿‡ä¸€å †çš„é“¾æ¥ç»„ç»‡å‡ºä¸€é¢—ç»“æ„æ ‘ï¼ŒæŠŠç›¸ä¼¼å¯¹è±¡ç»„åˆæˆä¸€ç»„ï¼Œå¯ä»¥è¢«è°ƒç”¨çš„ç»“æ„æ ‘å¯¹è±¡çš„è®¾è®¡æ€è·¯ã€‚</p><p><strong>ç»å¸¸åœ¨å†³ç­–æ ‘ä¸­ä½¿ç”¨</strong></p></blockquote><p><img src=https://camo.githubusercontent.com/ffa8e4042a41740aa4c35fc65dbb90834b441a4856598998fc4c8787b117ac06/68747470733a2f2f627567737461636b2e636e2f6173736574732f696d616765732f323032302f6974737461636b2d64656d6f2d64657369676e2d382d30322e706e67 loading=lazy alt=åœºæ™¯æ¨¡å¼ï¼›è¥é”€å†³ç­–æ ‘></p><h3 id=ç»„åˆæ¨¡å¼åä¾‹>ç»„åˆæ¨¡å¼åä¾‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>EngineController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>EngineController</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userSex</span><span class=p>,</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>userAge</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;ifelseå®ç°æ–¹å¼åˆ¤æ–­ç”¨æˆ·ç»“æœã€‚userIdï¼š{} userSexï¼š{} userAgeï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>userSex</span><span class=p>,</span><span class=w> </span><span class=n>userAge</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=s>&#34;man&#34;</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>userSex</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>userAge</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>25</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=s>&#34;æœå®A&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>userAge</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>25</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=s>&#34;æœå®B&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=s>&#34;woman&#34;</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>userSex</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>userAge</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>25</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=s>&#34;æœå®C&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>userAge</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>25</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=s>&#34;æœå®D&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=åˆ©ç”¨ç»„åˆæ¨¡å¼é‡æ„ä»£ç >åˆ©ç”¨ç»„åˆæ¨¡å¼é‡æ„ä»£ç </h3><p><img src=https://camo.githubusercontent.com/0b06bedfc851e25558bd6ae09aa7f20182487d26b43a188daf4a4b1cbe5646fc/68747470733a2f2f627567737461636b2e636e2f6173736574732f696d616765732f323032302f6974737461636b2d64656d6f2d64657369676e2d382d30332e706e67 loading=lazy alt=ç»„åˆæ¨¡å¼æ¨¡å‹ç»“æ„></p><ul><li>æ ‘èŠ‚ç‚¹é€»è¾‘è¿‡æ»¤å™¨æ¥å£</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>LogicFilter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * é€»è¾‘å†³ç­–å™¨
</span></span></span><span class=line><span class=cl><span class=cm>     *
</span></span></span><span class=line><span class=cl><span class=cm>     * @param matterValue          å†³ç­–å€¼
</span></span></span><span class=line><span class=cl><span class=cm>     * @param treeNodeLineInfoList å†³ç­–èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=cm>     * @return ä¸‹ä¸€ä¸ªèŠ‚ç‚¹Id
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=nf>filter</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>matterValue</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>TreeNodeLink</span><span class=o>&gt;</span><span class=w> </span><span class=n>treeNodeLineInfoList</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * è·å–å†³ç­–å€¼
</span></span></span><span class=line><span class=cl><span class=cm>     *
</span></span></span><span class=line><span class=cl><span class=cm>     * @param decisionMatter å†³ç­–ç‰©æ–™
</span></span></span><span class=line><span class=cl><span class=cm>     * @return å†³ç­–å€¼
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>matterValue</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å†³ç­–æŠ½è±¡ç±»æä¾›åŸºç¡€æœåŠ¡</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=kd>class</span> <span class=nc>BaseLogic</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>LogicFilter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>//è¿”å›å†³ç­–èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå†³ç­–èŠ‚ç‚¹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=nf>filter</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>matterValue</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>TreeNodeLink</span><span class=o>&gt;</span><span class=w> </span><span class=n>treeNodeLinkList</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>nodeLine</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>treeNodeLinkList</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>decisionLogic</span><span class=p>(</span><span class=n>matterValue</span><span class=p>,</span><span class=w> </span><span class=n>nodeLine</span><span class=p>))</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>nodeLine</span><span class=p>.</span><span class=na>getNodeIdTo</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>0L</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>//è·å–å†³ç­–å€¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>matterValue</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>decisionLogic</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>matterValue</span><span class=p>,</span><span class=w> </span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>nodeLink</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>nodeLink</span><span class=p>.</span><span class=na>getRuleLimitType</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=n>1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>matterValue</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>nodeLink</span><span class=p>.</span><span class=na>getRuleLimitValue</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=n>2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>matterValue</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>nodeLink</span><span class=p>.</span><span class=na>getRuleLimitValue</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=n>3</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>matterValue</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>nodeLink</span><span class=p>.</span><span class=na>getRuleLimitValue</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=n>4</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>matterValue</span><span class=p>)</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>nodeLink</span><span class=p>.</span><span class=na>getRuleLimitValue</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=n>5</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>matterValue</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>nodeLink</span><span class=p>.</span><span class=na>getRuleLimitValue</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>default</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å†³ç­–æ ‘çš„èŠ‚ç‚¹</li></ul><blockquote><p>éœ€è¦å†³ç­–çš„å€¼æˆ–å±æ€§</p></blockquote><p><strong>å¹´é¾„èŠ‚ç‚¹</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserAgeFilter</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>BaseLogic</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>matterValue</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;age&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>æ€§åˆ«èŠ‚ç‚¹</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserGenderFilter</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>BaseLogic</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>matterValue</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;gender&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å†³ç­–å¼•æ“æ¥å£</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>IEngine</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>EngineResult</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=kd>final</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>TreeRich</span><span class=w> </span><span class=n>treeRich</span><span class=p>,</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å†³ç­–èŠ‚ç‚¹é…ç½®æˆ–ç®¡ç†</li></ul><blockquote><p>ç®¡ç†æœ‰å“ªäº›å†³ç­–èŠ‚ç‚¹</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>EngineConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>LogicFilter</span><span class=o>&gt;</span><span class=w> </span><span class=n>logicFilterMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logicFilterMap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentHashMap</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logicFilterMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;userAge&#34;</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>UserAgeFilter</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logicFilterMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;userGender&#34;</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>UserGenderFilter</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>LogicFilter</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getLogicFilterMap</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>logicFilterMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setLogicFilterMap</span><span class=p>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>LogicFilter</span><span class=o>&gt;</span><span class=w> </span><span class=n>logicFilterMap</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>logicFilterMap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>logicFilterMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å†³ç­–å¼•æ“çš„åŠŸèƒ½æŠ½è±¡</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=kd>class</span> <span class=nc>EngineBase</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>EngineConfig</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>IEngine</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>EngineBase</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=n>EngineResult</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>TreeRich</span><span class=w> </span><span class=n>treeRich</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=n>TreeNode</span><span class=w> </span><span class=nf>engineDecisionMaker</span><span class=p>(</span><span class=n>TreeRich</span><span class=w> </span><span class=n>treeRich</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>TreeRoot</span><span class=w> </span><span class=n>treeRoot</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>treeRich</span><span class=p>.</span><span class=na>getTreeRoot</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Long</span><span class=p>,</span><span class=w> </span><span class=n>TreeNode</span><span class=o>&gt;</span><span class=w> </span><span class=n>treeNodeMap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>treeRich</span><span class=p>.</span><span class=na>getTreeNodeMap</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è§„åˆ™æ ‘æ ¹ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Long</span><span class=w> </span><span class=n>rootNodeId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>treeRoot</span><span class=p>.</span><span class=na>getTreeRootNodeId</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNodeInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>rootNodeId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//èŠ‚ç‚¹ç±»å‹[NodeType]ï¼›1å­å¶ã€2æœå®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>treeNodeInfo</span><span class=p>.</span><span class=na>getNodeType</span><span class=p>().</span><span class=na>equals</span><span class=p>(</span><span class=n>1</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>String</span><span class=w> </span><span class=n>ruleKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>treeNodeInfo</span><span class=p>.</span><span class=na>getRuleKey</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>LogicFilter</span><span class=w> </span><span class=n>logicFilter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>logicFilterMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>ruleKey</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>String</span><span class=w> </span><span class=n>matterValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>logicFilter</span><span class=p>.</span><span class=na>matterValue</span><span class=p>(</span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Long</span><span class=w> </span><span class=n>nextNode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>logicFilter</span><span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>matterValue</span><span class=p>,</span><span class=w> </span><span class=n>treeNodeInfo</span><span class=p>.</span><span class=na>getTreeNodeLinkList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>treeNodeInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>nextNode</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>logger</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;å†³ç­–æ ‘å¼•æ“=&gt;{} userIdï¼š{} treeIdï¼š{} treeNodeï¼š{} ruleKeyï¼š{} matterValueï¼š{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>treeRoot</span><span class=p>.</span><span class=na>getTreeName</span><span class=p>(),</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>treeNodeInfo</span><span class=p>.</span><span class=na>getTreeNodeId</span><span class=p>(),</span><span class=w> </span><span class=n>ruleKey</span><span class=p>,</span><span class=w> </span><span class=n>matterValue</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>treeNodeInfo</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å†³ç­–å¼•æ“çš„å®ç°</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>TreeEngineHandle</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>EngineBase</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>EngineResult</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>TreeRich</span><span class=w> </span><span class=n>treeRich</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// å†³ç­–æµç¨‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>engineDecisionMaker</span><span class=p>(</span><span class=n>treeRich</span><span class=p>,</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>decisionMatter</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// å†³ç­–ç»“æœ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>EngineResult</span><span class=p>(</span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>treeId</span><span class=p>,</span><span class=w> </span><span class=n>treeNode</span><span class=p>.</span><span class=na>getTreeNodeId</span><span class=p>(),</span><span class=w> </span><span class=n>treeNode</span><span class=p>.</span><span class=na>getNodeValue</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>å†³ç­–æ ‘å»ºæ ‘</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Before</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>init</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// èŠ‚ç‚¹ï¼š1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode_01</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNode</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_01</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_01</span><span class=p>.</span><span class=na>setTreeNodeId</span><span class=p>(</span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_01</span><span class=p>.</span><span class=na>setNodeType</span><span class=p>(</span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_01</span><span class=p>.</span><span class=na>setNodeValue</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_01</span><span class=p>.</span><span class=na>setRuleKey</span><span class=p>(</span><span class=s>&#34;userGender&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_01</span><span class=p>.</span><span class=na>setRuleDesc</span><span class=p>(</span><span class=s>&#34;ç”¨æˆ·æ€§åˆ«[ç”·/å¥³]&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// é“¾æ¥ï¼š1-&gt;11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>treeNodeLink_11</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNodeLink</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_11</span><span class=p>.</span><span class=na>setNodeIdFrom</span><span class=p>(</span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_11</span><span class=p>.</span><span class=na>setNodeIdTo</span><span class=p>(</span><span class=n>11L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_11</span><span class=p>.</span><span class=na>setRuleLimitType</span><span class=p>(</span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_11</span><span class=p>.</span><span class=na>setRuleLimitValue</span><span class=p>(</span><span class=s>&#34;man&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// é“¾æ¥ï¼š1-&gt;12</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>treeNodeLink_12</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNodeLink</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_12</span><span class=p>.</span><span class=na>setNodeIdTo</span><span class=p>(</span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_12</span><span class=p>.</span><span class=na>setNodeIdTo</span><span class=p>(</span><span class=n>12L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_12</span><span class=p>.</span><span class=na>setRuleLimitType</span><span class=p>(</span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_12</span><span class=p>.</span><span class=na>setRuleLimitValue</span><span class=p>(</span><span class=s>&#34;woman&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>TreeNodeLink</span><span class=o>&gt;</span><span class=w> </span><span class=n>treeNodeLinkList_1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLinkList_1</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>treeNodeLink_11</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLinkList_1</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>treeNodeLink_12</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_01</span><span class=p>.</span><span class=na>setTreeNodeLinkList</span><span class=p>(</span><span class=n>treeNodeLinkList_1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// èŠ‚ç‚¹ï¼š11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode_11</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNode</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_11</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_11</span><span class=p>.</span><span class=na>setTreeNodeId</span><span class=p>(</span><span class=n>11L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_11</span><span class=p>.</span><span class=na>setNodeType</span><span class=p>(</span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_11</span><span class=p>.</span><span class=na>setNodeValue</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_11</span><span class=p>.</span><span class=na>setRuleKey</span><span class=p>(</span><span class=s>&#34;userAge&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_11</span><span class=p>.</span><span class=na>setRuleDesc</span><span class=p>(</span><span class=s>&#34;ç”¨æˆ·å¹´é¾„&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// é“¾æ¥ï¼š11-&gt;111</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>treeNodeLink_111</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNodeLink</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_111</span><span class=p>.</span><span class=na>setNodeIdFrom</span><span class=p>(</span><span class=n>11L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_111</span><span class=p>.</span><span class=na>setNodeIdTo</span><span class=p>(</span><span class=n>111L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_111</span><span class=p>.</span><span class=na>setRuleLimitType</span><span class=p>(</span><span class=n>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_111</span><span class=p>.</span><span class=na>setRuleLimitValue</span><span class=p>(</span><span class=s>&#34;25&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// é“¾æ¥ï¼š11-&gt;112</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>treeNodeLink_112</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNodeLink</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_112</span><span class=p>.</span><span class=na>setNodeIdFrom</span><span class=p>(</span><span class=n>11L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_112</span><span class=p>.</span><span class=na>setNodeIdTo</span><span class=p>(</span><span class=n>112L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_112</span><span class=p>.</span><span class=na>setRuleLimitType</span><span class=p>(</span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_112</span><span class=p>.</span><span class=na>setRuleLimitValue</span><span class=p>(</span><span class=s>&#34;25&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>TreeNodeLink</span><span class=o>&gt;</span><span class=w> </span><span class=n>treeNodeLinkList_11</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLinkList_11</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>treeNodeLink_111</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLinkList_11</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>treeNodeLink_112</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_11</span><span class=p>.</span><span class=na>setTreeNodeLinkList</span><span class=p>(</span><span class=n>treeNodeLinkList_11</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// èŠ‚ç‚¹ï¼š12</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode_12</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNode</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_12</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_12</span><span class=p>.</span><span class=na>setTreeNodeId</span><span class=p>(</span><span class=n>12L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_12</span><span class=p>.</span><span class=na>setNodeType</span><span class=p>(</span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_12</span><span class=p>.</span><span class=na>setNodeValue</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_12</span><span class=p>.</span><span class=na>setRuleKey</span><span class=p>(</span><span class=s>&#34;userAge&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_12</span><span class=p>.</span><span class=na>setRuleDesc</span><span class=p>(</span><span class=s>&#34;ç”¨æˆ·å¹´é¾„&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// é“¾æ¥ï¼š12-&gt;121</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>treeNodeLink_121</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNodeLink</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_121</span><span class=p>.</span><span class=na>setNodeIdFrom</span><span class=p>(</span><span class=n>12L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_121</span><span class=p>.</span><span class=na>setNodeIdTo</span><span class=p>(</span><span class=n>121L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_121</span><span class=p>.</span><span class=na>setRuleLimitType</span><span class=p>(</span><span class=n>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_121</span><span class=p>.</span><span class=na>setRuleLimitValue</span><span class=p>(</span><span class=s>&#34;25&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// é“¾æ¥ï¼š12-&gt;122</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNodeLink</span><span class=w> </span><span class=n>treeNodeLink_122</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNodeLink</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_122</span><span class=p>.</span><span class=na>setNodeIdFrom</span><span class=p>(</span><span class=n>12L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_122</span><span class=p>.</span><span class=na>setNodeIdTo</span><span class=p>(</span><span class=n>122L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_122</span><span class=p>.</span><span class=na>setRuleLimitType</span><span class=p>(</span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLink_122</span><span class=p>.</span><span class=na>setRuleLimitValue</span><span class=p>(</span><span class=s>&#34;25&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>TreeNodeLink</span><span class=o>&gt;</span><span class=w> </span><span class=n>treeNodeLinkList_12</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLinkList_12</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>treeNodeLink_121</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeLinkList_12</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>treeNodeLink_122</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_12</span><span class=p>.</span><span class=na>setTreeNodeLinkList</span><span class=p>(</span><span class=n>treeNodeLinkList_12</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// èŠ‚ç‚¹ï¼š111</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode_111</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNode</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_111</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_111</span><span class=p>.</span><span class=na>setTreeNodeId</span><span class=p>(</span><span class=n>111L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_111</span><span class=p>.</span><span class=na>setNodeType</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_111</span><span class=p>.</span><span class=na>setNodeValue</span><span class=p>(</span><span class=s>&#34;æœå®A&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// èŠ‚ç‚¹ï¼š112</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode_112</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNode</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_112</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_112</span><span class=p>.</span><span class=na>setTreeNodeId</span><span class=p>(</span><span class=n>112L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_112</span><span class=p>.</span><span class=na>setNodeType</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_112</span><span class=p>.</span><span class=na>setNodeValue</span><span class=p>(</span><span class=s>&#34;æœå®B&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// èŠ‚ç‚¹ï¼š121</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode_121</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNode</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_121</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_121</span><span class=p>.</span><span class=na>setTreeNodeId</span><span class=p>(</span><span class=n>121L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_121</span><span class=p>.</span><span class=na>setNodeType</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_121</span><span class=p>.</span><span class=na>setNodeValue</span><span class=p>(</span><span class=s>&#34;æœå®C&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// èŠ‚ç‚¹ï¼š122</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeNode</span><span class=w> </span><span class=n>treeNode_122</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeNode</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_122</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_122</span><span class=p>.</span><span class=na>setTreeNodeId</span><span class=p>(</span><span class=n>122L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_122</span><span class=p>.</span><span class=na>setNodeType</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNode_122</span><span class=p>.</span><span class=na>setNodeValue</span><span class=p>(</span><span class=s>&#34;æœå®D&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// æ ‘æ ¹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TreeRoot</span><span class=w> </span><span class=n>treeRoot</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeRoot</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeRoot</span><span class=p>.</span><span class=na>setTreeId</span><span class=p>(</span><span class=n>10001L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeRoot</span><span class=p>.</span><span class=na>setTreeRootNodeId</span><span class=p>(</span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeRoot</span><span class=p>.</span><span class=na>setTreeName</span><span class=p>(</span><span class=s>&#34;è§„åˆ™å†³ç­–æ ‘&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Long</span><span class=p>,</span><span class=w> </span><span class=n>TreeNode</span><span class=o>&gt;</span><span class=w> </span><span class=n>treeNodeMap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>1L</span><span class=p>,</span><span class=w> </span><span class=n>treeNode_01</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>11L</span><span class=p>,</span><span class=w> </span><span class=n>treeNode_11</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>12L</span><span class=p>,</span><span class=w> </span><span class=n>treeNode_12</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>111L</span><span class=p>,</span><span class=w> </span><span class=n>treeNode_111</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>112L</span><span class=p>,</span><span class=w> </span><span class=n>treeNode_112</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>121L</span><span class=p>,</span><span class=w> </span><span class=n>treeNode_121</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeNodeMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>122L</span><span class=p>,</span><span class=w> </span><span class=n>treeNode_122</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>treeRich</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TreeRich</span><span class=p>(</span><span class=n>treeRoot</span><span class=p>,</span><span class=w> </span><span class=n>treeNodeMap</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>è®¾è®¡æ¨¡å¼</a>
<a href=/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/>è¯»åæ„Ÿ</a>
<a href=/tags/%E6%9E%B6%E6%9E%84/>æ¶æ„</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/icyfenix-hoeksteen/><div class=article-image><img src=/p/icyfenix-hoeksteen/1.9ce725d0528cc3b0d5321b62181de3a9_hu_9ac50c4f106c2b5f.png width=250 height=150 loading=lazy alt="Featured image of post è¯»ã€Šå‡¤å‡°æ¶æ„ã€‹æœ‰æ„Ÿ--åˆ†å¸ƒå¼åŸºçŸ³" data-key=icyfenix-Hoeksteen data-hash="md5-nOcl0FKMw7DVMhtiGB3jqQ=="></div><div class=article-details><h2 class=article-title>è¯»ã€Šå‡¤å‡°æ¶æ„ã€‹æœ‰æ„Ÿ--åˆ†å¸ƒå¼åŸºçŸ³</h2></div></a></article><article class=has-image><a href=/p/icyfenix-argitektuur/><div class=article-image><img src=/p/icyfenix-argitektuur/1.ba219af96a0f1cdca5fb92348980d969_hu_2f661c5d754e7fa4.png width=250 height=150 loading=lazy alt="Featured image of post è¯»ã€Šå‡¤å‡°æ¶æ„ã€‹æœ‰æ„Ÿ--æ¶æ„ç¯‡" data-key=icyfenix-Argitektuur data-hash="md5-uiGa+WoPHNyl+5I0iYDZaQ=="></div><div class=article-details><h2 class=article-title>è¯»ã€Šå‡¤å‡°æ¶æ„ã€‹æœ‰æ„Ÿ--æ¶æ„ç¯‡</h2></div></a></article><article class=has-image><a href=/p/seatatransactional/><div class=article-image><img src=/p/seatatransactional/1.63f3b7c846c21077c3afe5fc869136a2_hu_282ad894616ffc29.png width=250 height=150 loading=lazy alt="Featured image of post ä»seataæºç å…¥æ‰‹åˆ†å¸ƒå¼äº‹åŠ¡" data-key=seataTransactional data-hash="md5-Y/O3yEbCEHfDr+X8hpE2og=="></div><div class=article-details><h2 class=article-title>ä»seataæºç å…¥æ‰‹åˆ†å¸ƒå¼äº‹åŠ¡</h2></div></a></article><article class=has-image><a href=/p/%E8%AF%BBkafka%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E6%9C%89%E6%84%9F/><div class=article-image><img src=/p/%E8%AF%BBkafka%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E6%9C%89%E6%84%9F/1.b6c59dbf772a12590b4b5e33955593f2_hu_9424f85e3bd38ebb.png width=250 height=150 loading=lazy alt="Featured image of post è¯»ã€ŠKafkaæƒå¨æŒ‡å—ã€‹æœ‰æ„Ÿ" data-hash="md5-tsWdv3cqElkLS14zlVWT8g=="></div><div class=article-details><h2 class=article-title>è¯»ã€ŠKafkaæƒå¨æŒ‡å—ã€‹æœ‰æ„Ÿ</h2></div></a></article><article><a href=/p/spring7.0aot/><div class=article-details><h2 class=article-title>Spring7.0çš„AOTè§£æ</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//thecoolboyhan.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2026 éŸ©æ°¸å‘çš„åšå®¢</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>